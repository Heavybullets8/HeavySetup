{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to Heavy Setup \u00b6 Purpose \u00b6 Provide guides for setting up applications specifically for Truenas SCALE This site is still under development and has a long way to go at the moment. But feel free to search for guides. Inspiration \u00b6 I know that the Truenas community does not have a ton of beginner friendly guides like other ecosystems do. I wanted to be apart of the community fixing that. So here is my contribution. Also in the future, I would like the community to submit guides to this site as well, I am hoping to turn this into a nice community hub for Truenas SCALE specific guides. Heres hoping for the best! Shout Outs \u00b6 This site takes a lot of inspiration from TRaSH Guides This guide also references a lot of TrueCharts guides and applications","title":"Introduction"},{"location":"#welcome-to-heavy-setup","text":"","title":"Welcome to Heavy Setup"},{"location":"#purpose","text":"Provide guides for setting up applications specifically for Truenas SCALE This site is still under development and has a long way to go at the moment. But feel free to search for guides.","title":"Purpose"},{"location":"#inspiration","text":"I know that the Truenas community does not have a ton of beginner friendly guides like other ecosystems do. I wanted to be apart of the community fixing that. So here is my contribution. Also in the future, I would like the community to submit guides to this site as well, I am hoping to turn this into a nice community hub for Truenas SCALE specific guides. Heres hoping for the best!","title":"Inspiration"},{"location":"#shout-outs","text":"This site takes a lot of inspiration from TRaSH Guides This guide also references a lot of TrueCharts guides and applications","title":"Shout Outs"},{"location":"faq/","text":"Why Did you not include screenshots of _____ ? \u00b6 If the setting is default I generally do not screenshot or document it.","title":"FAQ"},{"location":"faq/#why-did-you-not-include-screenshots-of-_____","text":"If the setting is default I generally do not screenshot or document it.","title":"Why Did you not include screenshots of _____ ?"},{"location":"applications/about/","text":"Welcome to the Applications section \u00b6 In this section, I will show off my application builds, and explain my reasoning for making them. Make sure to use the tabs on the left hand side to find an application you'd like to view a guide on.","title":"About"},{"location":"applications/about/#welcome-to-the-applications-section","text":"In this section, I will show off my application builds, and explain my reasoning for making them. Make sure to use the tabs on the left hand side to find an application you'd like to view a guide on.","title":"Welcome to the Applications section"},{"location":"applications/nextcloud/about/","text":"Purpose \u00b6 I personally use this to: Provide an easy way to backup: My Desktops My phone's Pictures Any Important Documents Sources \u00b6 Website \u00b6 Important information regarding NZBGet Github \u00b6 Source code for the project, active issues etc.","title":"About"},{"location":"applications/nextcloud/about/#purpose","text":"I personally use this to: Provide an easy way to backup: My Desktops My phone's Pictures Any Important Documents","title":"Purpose"},{"location":"applications/nextcloud/about/#sources","text":"","title":"Sources"},{"location":"applications/nextcloud/about/#website","text":"Important information regarding NZBGet","title":"Website"},{"location":"applications/nextcloud/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/nextcloud/datasets/","text":"This is the location your Nextcloud storage files will be located You do NOT need to create a dataset if you do not plan on using one. Nextcloud does not require one, instead you can rely on PVC, I personally have two pools though, my apps pool, and my storage pool, so I personally want my storage, or all of my Nextcloud backups on my storage pool Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it. You are REQUIRED to use apps:www-data and setting the permissions exactly how I have mine, If you have anything different, chances are it will not work","title":"Datasets"},{"location":"applications/nextcloud/installation/","text":"For this application I used the Nextcloud provided by TrueCharts . Available under the stable train Container \u00b6 Application Name nextcloud Name it whatever you want, I stick with the chart name NEXTCLOUD_ADMIN_USER (First Install Only) USERNAME This is up to you NEXTCLOUD_ADMIN_PASSWORD (First Install Only) PASSWORD This is up to you Environment Variables \u00b6 This is the ONLY environment variable, and you can SKIP this if you did not create a separate dataset Name NEXTCLOUD_DATA_DIR Value /cloud Storage \u00b6 This is also an optional step, if you did not create a separate dataset, you can skip this It is vital that your mountpath matches your value for the environment variable you created above Ingress \u00b6 This is another optional step, if you never plan on using ingress, you can skip this. This is by FAR the most important thing to get right the very first time, if you fail to setup ingress on the applications VERY FIRST deployment, you will not be able to access Nextcloud via a domain name Configure Hosts > Add Configure Paths > Add Type your hostname under HostName Configure TLS-Settings > Add Configure Certificate Hosts > Add Type your hostname under HostName Select your correct cert I do not add any middlewares, since Nextcloud has its own authentication, and adding middlewares breaks phone backups, since it has no way to authenticate through Authelia","title":"Installation"},{"location":"applications/nextcloud/installation/#container","text":"Application Name nextcloud Name it whatever you want, I stick with the chart name NEXTCLOUD_ADMIN_USER (First Install Only) USERNAME This is up to you NEXTCLOUD_ADMIN_PASSWORD (First Install Only) PASSWORD This is up to you","title":"Container"},{"location":"applications/nextcloud/installation/#environment-variables","text":"This is the ONLY environment variable, and you can SKIP this if you did not create a separate dataset Name NEXTCLOUD_DATA_DIR Value /cloud","title":"Environment Variables"},{"location":"applications/nextcloud/installation/#storage","text":"This is also an optional step, if you did not create a separate dataset, you can skip this It is vital that your mountpath matches your value for the environment variable you created above","title":"Storage"},{"location":"applications/nextcloud/installation/#ingress","text":"This is another optional step, if you never plan on using ingress, you can skip this. This is by FAR the most important thing to get right the very first time, if you fail to setup ingress on the applications VERY FIRST deployment, you will not be able to access Nextcloud via a domain name Configure Hosts > Add Configure Paths > Add Type your hostname under HostName Configure TLS-Settings > Add Configure Certificate Hosts > Add Type your hostname under HostName Select your correct cert I do not add any middlewares, since Nextcloud has its own authentication, and adding middlewares breaks phone backups, since it has no way to authenticate through Authelia","title":"Ingress"},{"location":"applications/notifiarr/about/","text":"Purpose \u00b6 I personally use this to: Synchronize TRaSH Guides Custom Radarr/Sonarr profiles with my Sonarr/Radarr instance Send statistics to my discord server Current Plex streams Changes in TRaSH Guides profile settings Sonarr/Radarr recently grabbed releases Recently downloaded media Upcoming media Sources \u00b6 Website \u00b6 Their website is where you will go to login to your account and access your integrations Wiki \u00b6 Their Wiki includes great instructions for app-integration. It is where I learned to setup most of everything I use Github \u00b6 Source code for the project, active issues etc. Video \u00b6 The video below covers Integrations TRaSH Sync Keep in mind though, the video doesn't cover Truenas SCALE specific settings though, and not a WHOLE lot of settings will transfer over.","title":"About"},{"location":"applications/notifiarr/about/#purpose","text":"I personally use this to: Synchronize TRaSH Guides Custom Radarr/Sonarr profiles with my Sonarr/Radarr instance Send statistics to my discord server Current Plex streams Changes in TRaSH Guides profile settings Sonarr/Radarr recently grabbed releases Recently downloaded media Upcoming media","title":"Purpose"},{"location":"applications/notifiarr/about/#sources","text":"","title":"Sources"},{"location":"applications/notifiarr/about/#website","text":"Their website is where you will go to login to your account and access your integrations","title":"Website"},{"location":"applications/notifiarr/about/#wiki","text":"Their Wiki includes great instructions for app-integration. It is where I learned to setup most of everything I use","title":"Wiki"},{"location":"applications/notifiarr/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/notifiarr/about/#video","text":"The video below covers Integrations TRaSH Sync Keep in mind though, the video doesn't cover Truenas SCALE specific settings though, and not a WHOLE lot of settings will transfer over.","title":"Video"},{"location":"applications/notifiarr/datasets/","text":"Config File \u00b6 So, this isn't as easy as just taking screenshots.. You'll need to go to Notifiarrs site, and look at their documentation as well Ensure the config file is named: notifiarr.conf notifiarr.conf \u00b6 ## This API key must be copied from your notifiarr.com account. api_key = \"API_KEY_HERE\" ## Setting a UI password enables the human accessible web GUI. Must be at least 16 characters. ## The default username is admin; change it by setting ui_password to \"username:password\" ## Set to \"webauth\" to disable the login form and use only proxy authentication. See upstreams, below. ## Your proxy auth must pass x-webauth-user header if you set this to \"webauth\". ui_password = \"USERNAME:PASSWORD\" ## The ip:port to listen on for incoming HTTP requests. 0.0.0.0 means all/any IP and is recommended! ## You may use \"127.0.0.1:5454\" to listen only on localhost; good if using a local proxy. ## This is used to receive Plex webhooks and Media Request commands. ## bind_addr = \"0.0.0.0:54544\" ## Allowed upstream networks. Networks here are allowed to send two special headers: ## (1) x-forwarded-for (2) x-webauth-user ## The first header sets the IPs in logs. ## The second header allows an auth proxy to set a logged-in username. Be careful. ## ## Set this to your reverse proxy server's IP or network. If you leave off the mask, ## then /32 or /128 is assumed depending on IP version. Empty by default. Example: ## upstreams = [\"172.16.0.0/16\",] api_key Login to Notifiarr.com Then your API key will be found here: ui_password Make sure you read the requirements within the text above. It specifically says it needs: A password of at LEAST 16 characters bind_addr You need to set this to 0.0.0.0 followed by the port you wish to use If you follow my guide exactly, you'll end up using port 54544 This is the port you will access the WEBGUI from upstreams This is just supposed to be your kubernetes network By default your network is 172.16.0.0/16 Dataset Permissions \u00b6 After you have created your notifiarr.conf file, and filled out the required fields, you will need to create a dataset for the file to reside in Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it.","title":"Preparation"},{"location":"applications/notifiarr/datasets/#config-file","text":"So, this isn't as easy as just taking screenshots.. You'll need to go to Notifiarrs site, and look at their documentation as well Ensure the config file is named: notifiarr.conf","title":"Config File"},{"location":"applications/notifiarr/datasets/#notifiarrconf","text":"## This API key must be copied from your notifiarr.com account. api_key = \"API_KEY_HERE\" ## Setting a UI password enables the human accessible web GUI. Must be at least 16 characters. ## The default username is admin; change it by setting ui_password to \"username:password\" ## Set to \"webauth\" to disable the login form and use only proxy authentication. See upstreams, below. ## Your proxy auth must pass x-webauth-user header if you set this to \"webauth\". ui_password = \"USERNAME:PASSWORD\" ## The ip:port to listen on for incoming HTTP requests. 0.0.0.0 means all/any IP and is recommended! ## You may use \"127.0.0.1:5454\" to listen only on localhost; good if using a local proxy. ## This is used to receive Plex webhooks and Media Request commands. ## bind_addr = \"0.0.0.0:54544\" ## Allowed upstream networks. Networks here are allowed to send two special headers: ## (1) x-forwarded-for (2) x-webauth-user ## The first header sets the IPs in logs. ## The second header allows an auth proxy to set a logged-in username. Be careful. ## ## Set this to your reverse proxy server's IP or network. If you leave off the mask, ## then /32 or /128 is assumed depending on IP version. Empty by default. Example: ## upstreams = [\"172.16.0.0/16\",] api_key Login to Notifiarr.com Then your API key will be found here: ui_password Make sure you read the requirements within the text above. It specifically says it needs: A password of at LEAST 16 characters bind_addr You need to set this to 0.0.0.0 followed by the port you wish to use If you follow my guide exactly, you'll end up using port 54544 This is the port you will access the WEBGUI from upstreams This is just supposed to be your kubernetes network By default your network is 172.16.0.0/16","title":"notifiarr.conf"},{"location":"applications/notifiarr/datasets/#dataset-permissions","text":"After you have created your notifiarr.conf file, and filled out the required fields, you will need to create a dataset for the file to reside in Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it.","title":"Dataset Permissions"},{"location":"applications/notifiarr/ext_services/","text":"Purpose \u00b6 We want to link external services to notifiarr so we can use a domain name when connecting their site to our client as shown: External Services \u00b6 You will need to launch an external services application, offered by Truecharts External-Services Documentation Container \u00b6 External Service IP is the local IP address of your Truenas SCALE server Service Port is the port used by Notifiarr Ingress \u00b6","title":"External Services"},{"location":"applications/notifiarr/ext_services/#purpose","text":"We want to link external services to notifiarr so we can use a domain name when connecting their site to our client as shown:","title":"Purpose"},{"location":"applications/notifiarr/ext_services/#external-services","text":"You will need to launch an external services application, offered by Truecharts External-Services Documentation","title":"External Services"},{"location":"applications/notifiarr/ext_services/#container","text":"External Service IP is the local IP address of your Truenas SCALE server Service Port is the port used by Notifiarr","title":"Container"},{"location":"applications/notifiarr/ext_services/#ingress","text":"","title":"Ingress"},{"location":"applications/notifiarr/in-app/","text":"WEBGUI Settings \u00b6 Enter your web GUI Your WEBGUI should be accessible at either: SERVERIP:PORT 192.168.0.77:54544 or DOMAIN NAME notifiarr.myfakesite.net Enter your Username and password you set in your configuation file Click on configuration Radarr \u00b6 Go to your Starr Apps Setting Click the + icon to the right of Radarr Fill out the information: Name Value Reason Name Radarr Doesn't matter what you call it, just call it something memorable URL http://radarr.ix-radarr.svc.cluster.local:7878 You will need to generate a different DNS name if your app name is not radarr Generate a new name with Truecharts Guide API Key APIKEYHERE Go to Radarr > Settings > General > Under Security Copy your API Key Username NULL Not required Password NULL Not required picture Sonarr \u00b6 Go to your Starr Apps Setting Click the + icon to the right of Radarr Fill out the information: Name Value Reason Name Sonarr Doesn't matter what you call it, just call it something memorable URL http://sonarrnll-custom-app.ix-sonarrnll.svc.cluster.local:8989 You will need to generate a different DNS name if your app name is not sonarrnll Generate a new name with Truecharts Guide API Key APIKEYHERE Go to Sonarr > Settings > General > Under Security Copy your API Key Username NULL Not required Password NULL Not required picture Plex \u00b6 Go to your Media Apps Setting Click the + icon to the right of Plex Fill out the information: Name Value Reason Name NULL This will be filled out after refreshing your config. Leave it blank URL http://plex.ix-plex.svc.cluster.local:32400 You will need to generate a different DNS name if your app name is not plex Generate a new name with Truecharts Guide Plex Token PLEX_TOKEN_HERE Plex themselves have a good guide for finding your Plex token picture Saving \u00b6 After you are done, make sure to save your configuration This will edit your notifiarr.conf file with your new settings Click Save & Reload , located at the bottom left of your screen","title":"WebGUI Settings"},{"location":"applications/notifiarr/in-app/#webgui-settings","text":"Enter your web GUI Your WEBGUI should be accessible at either: SERVERIP:PORT 192.168.0.77:54544 or DOMAIN NAME notifiarr.myfakesite.net Enter your Username and password you set in your configuation file Click on configuration","title":"WEBGUI Settings"},{"location":"applications/notifiarr/in-app/#radarr","text":"Go to your Starr Apps Setting Click the + icon to the right of Radarr Fill out the information: Name Value Reason Name Radarr Doesn't matter what you call it, just call it something memorable URL http://radarr.ix-radarr.svc.cluster.local:7878 You will need to generate a different DNS name if your app name is not radarr Generate a new name with Truecharts Guide API Key APIKEYHERE Go to Radarr > Settings > General > Under Security Copy your API Key Username NULL Not required Password NULL Not required picture","title":"Radarr"},{"location":"applications/notifiarr/in-app/#sonarr","text":"Go to your Starr Apps Setting Click the + icon to the right of Radarr Fill out the information: Name Value Reason Name Sonarr Doesn't matter what you call it, just call it something memorable URL http://sonarrnll-custom-app.ix-sonarrnll.svc.cluster.local:8989 You will need to generate a different DNS name if your app name is not sonarrnll Generate a new name with Truecharts Guide API Key APIKEYHERE Go to Sonarr > Settings > General > Under Security Copy your API Key Username NULL Not required Password NULL Not required picture","title":"Sonarr"},{"location":"applications/notifiarr/in-app/#plex","text":"Go to your Media Apps Setting Click the + icon to the right of Plex Fill out the information: Name Value Reason Name NULL This will be filled out after refreshing your config. Leave it blank URL http://plex.ix-plex.svc.cluster.local:32400 You will need to generate a different DNS name if your app name is not plex Generate a new name with Truecharts Guide Plex Token PLEX_TOKEN_HERE Plex themselves have a good guide for finding your Plex token picture","title":"Plex"},{"location":"applications/notifiarr/in-app/#saving","text":"After you are done, make sure to save your configuration This will edit your notifiarr.conf file with your new settings Click Save & Reload , located at the bottom left of your screen","title":"Saving"},{"location":"applications/notifiarr/notifiarr/","text":"Container \u00b6 I use the big blue Launch Docker Container Button Container Repository golift/notifiarr Container Tag latest Networking \u00b6 DNS Settings \u00b6 I use the following setting so we can use the Kubernetes DNS names when linking applications together Port Forwarding \u00b6 Configure both TCP and UDP for 54544 We cannot use Ports Lower than 9000, which is why I did not use the default 5454 port as suggested in their documentation Container Port 54544 Node Port 54544 Protocol UDP Container Port 54544 Node Port 54544 Protocol TCP Picture Storage \u00b6 Host Path \u00b6 Host Path This is path you to the dataset you created on the preparation page /mnt/speed/notifiarr Mount Path The Mount Path is REQUIRED to be /config /config Volume \u00b6 Mount Path /var/run/utmp Dataset Name This doesnt really matter, just make sure theres no special characters in the name var Picture","title":"Notifiarr"},{"location":"applications/notifiarr/notifiarr/#container","text":"I use the big blue Launch Docker Container Button Container Repository golift/notifiarr Container Tag latest","title":"Container"},{"location":"applications/notifiarr/notifiarr/#networking","text":"","title":"Networking"},{"location":"applications/notifiarr/notifiarr/#dns-settings","text":"I use the following setting so we can use the Kubernetes DNS names when linking applications together","title":"DNS Settings"},{"location":"applications/notifiarr/notifiarr/#port-forwarding","text":"Configure both TCP and UDP for 54544 We cannot use Ports Lower than 9000, which is why I did not use the default 5454 port as suggested in their documentation Container Port 54544 Node Port 54544 Protocol UDP Container Port 54544 Node Port 54544 Protocol TCP Picture","title":"Port Forwarding"},{"location":"applications/notifiarr/notifiarr/#storage","text":"","title":"Storage"},{"location":"applications/notifiarr/notifiarr/#host-path","text":"Host Path This is path you to the dataset you created on the preparation page /mnt/speed/notifiarr Mount Path The Mount Path is REQUIRED to be /config /config","title":"Host Path"},{"location":"applications/notifiarr/notifiarr/#volume","text":"Mount Path /var/run/utmp Dataset Name This doesnt really matter, just make sure theres no special characters in the name var Picture","title":"Volume"},{"location":"applications/nzbget/about/","text":"Purpose \u00b6 I personally use this to: Download NZB Files Sonarr/Radarr/Lidarr all send their NZB download requests to NZBGet Sources \u00b6 Website \u00b6 Important information regarding NZBGet Github \u00b6 Source code for the project, active issues etc.","title":"About"},{"location":"applications/nzbget/about/#purpose","text":"I personally use this to: Download NZB Files Sonarr/Radarr/Lidarr all send their NZB download requests to NZBGet","title":"Purpose"},{"location":"applications/nzbget/about/#sources","text":"","title":"Sources"},{"location":"applications/nzbget/about/#website","text":"Important information regarding NZBGet","title":"Website"},{"location":"applications/nzbget/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/nzbget/datasets/","text":"This is the location your completed nzb files will be located Typical setting user:group to apps , nothing fancy here Placed the created nzb dataset within the downloads folder Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it.","title":"Datasets"},{"location":"applications/nzbget/in-app/","text":"Keep in mind, these are just my personal settings, if you are wanting a more in-depth example, check out TRaSH Guides: NZBGet Documentation Paths \u00b6 MainDir /nzb ScriptDir ${MainDir}/scripts Security \u00b6 ControlPassword NEWPASSWORD set this to something I will personally use AuthorizedIP 127.0.0.1,192.168.0.*,172.16.*.* This field is separated by commas. I added my Lan on there 192.168.0.* As well as the kubernetes Network 172.16.*.* Catagories \u00b6 I use 5 catagories Movies is used by: Radarr I also always enable Remove Completed for NZBs Series is used by: Sonarr I also always enable Remove Completed for NZBs Music is used by: Lidarr I also always enable Remove Completed for NZBs Manual is ignored by all of my applications and only for my personal use Manga is for Komga Komga doesn't automatically import, I just decided to give it its own category anyway While creating these catagories, I ONLY changed the name, no other field was changed, the files once completed, will still go into their own directory as shown below. Extension Scripts \u00b6 Extensions Clean.py, HashRenamer.py, Flatten.py Script Order Clean.py, Flatten.py, HashRenamer.py As long as the scripts are in your scripts directory you should be set Here is the code for the extensions I use, make sure to copy and paste them with the .py extensions and place them into your scripts folder Clean.py More info can be found by TRaSH Guides #!/usr/bin/env python3 # ############################################################################## ### NZBGET SCAN SCRIPT ### # Clean NZB name. # # Removes the following suffixes from NZB name: # NZBgeek / Obfuscated / BUYMORE / Scrambled. # # NOTE: This script requires Python to be installed on your system. ### NZBGET SCAN SCRIPT ### ############################################################################## from __future__ import print_function import os, re, sys # Exit codes used by NZBGet POSTPROCESS_SUCCESS=93 POSTPROCESS_ERROR=94 POSTPROCESS_SKIP=95 # Check if the script is called from NZBGet 13.0 or later if not 'NZBOP_SCRIPTDIR' in os.environ: print('*** NZBGet post-processing script ***') print('This script is supposed to be called from NZBGet (13.0 or later).') sys.exit(POSTPROCESS_ERROR) if not 'NZBNP_NZBNAME' in os.environ: print('[WARN] Filename not found in environment') sys.exit(POSTPROCESS_ERROR) fwp = os.environ['NZBNP_NZBNAME'] fwp = re.sub('(?i)-4P\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-4Planet\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-AsRequested\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-AsRequested-xpost\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-BUYMORE\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Chamele0n\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-GEROV\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-iNC0GNiTO\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-NZBGeek\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Obfuscated\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-postbot\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Rakuv\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Scrambled\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-WhiteRev\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-xpost\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[eztv\\]\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[TGx\\]\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[TGx\\]-xpost\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[ettv\\]\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-WRTEAM\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-CAPTCHA\\.nzb$', '.nzb', fwp) fwp = re.sub(r'(\\-[^-.\\n]*)(\\-.{4})?\\.nzb$', r'\\1.nzb', fwp) if fwp: print('[NZB] NZBNAME=', fwp, sep='') sys.exit(POSTPROCESS_SUCCESS) Flatten.py This removes all of the sub-folders created by the unpack process More info can be found on the GitHub source #!/usr/bin/env python # ############################################################################## ### NZBGET POST-PROCESSING SCRIPT ### # Flatten all downloaded files into the root download directory. # # This removes all of the sub-folders created by the unpack process. # This should run before other scripts. # # NOTE: This script requires Python to be installed on your system. ############################################################################## ### OPTIONS ### # Destination Directory. # # Set the directory where you want all files to be moved to. # Use this if you want all downloaded files in a single \"root\" directory. # If left blank, files will all be \"flattened\" into the individual download's sub-directory. #DestinationDirectory= # Append Categories (yes, no). # # If using the Destination Directory above, then this option will append the download category. #AppendCategories=no ### NZBGET POST-PROCESSING SCRIPT ### ############################################################################## import os import sys import shutil # NZBGet Exit Codes NZBGET_POSTPROCESS_PARCHECK = 92 NZBGET_POSTPROCESS_SUCCESS = 93 NZBGET_POSTPROCESS_ERROR = 94 NZBGET_POSTPROCESS_NONE = 95 if 'NZBOP_SCRIPTDIR' not in os.environ: print(\"This script can only be called from NZBGet (11.0 or later).\") sys.exit(0) if os.environ['NZBOP_VERSION'][0:5] < '11.0': print(\"[ERROR] NZBGet Version %s is not supported. Please update NZBGet.\" % (str(os.environ['NZBOP_VERSION']))) sys.exit(0) print(\"Script triggered from NZBGet Version %s.\" % (str(os.environ['NZBOP_VERSION']))) status = 0 if 'NZBPP_TOTALSTATUS' in os.environ: if not os.environ['NZBPP_TOTALSTATUS'] == 'SUCCESS': print(\"[ERROR] Download failed with status %s.\" % (os.environ['NZBPP_STATUS'])) status = 1 else: # Check par status if os.environ.get('NZBPP_PARSTATUS') == '1' or os.environ.get('NZBPP_PARSTATUS') == '4': print(\"[ERROR] Par-repair failed, setting status \\\"failed\\\".\") status = 1 # Check unpack status if os.environ.get('NZBPP_UNPACKSTATUS') == '1': print(\"[ERROR] Unpack failed, setting status \\\"failed\\\".\") status = 1 if os.environ.get('NZBPP_UNPACKSTATUS') == '0' and os.environ.get('NZBPP_PARSTATUS') == '0': # Unpack was skipped due to nzb-file properties or due to errors during par-check if os.environ.get('NZBPP_HEALTH') < 1000: print(\"[ERROR] Download health is compromised and Par-check/repair disabled or no .par2 files found. Setting status \\\"failed\\\".\") print(\"[ERROR] Please check your Par-check/repair settings for future downloads.\") status = 1 else: print(\"[ERROR] Par-check/repair disabled or no .par2 files found, and Unpack not required. Health is ok so handle as though download successful.\") print(\"[WARNING] Please check your Par-check/repair settings for future downloads.\") # Check if destination directory exists (important for reprocessing of history items) if not os.path.isdir(os.environ.get('NZBPP_DIRECTORY')): print(\"[ERROR] Nothing to post-process: destination directory\", os.environ['NZBPP_DIRECTORY'], \"doesn't exist. Setting status \\\"failed\\\".\") status = 1 # All checks done, now launching the script. if status == 1: sys.exit(NZBGET_POSTPROCESS_NONE) def removeEmptyFolders(path, removeRoot=True): #Function to remove empty folders if not os.path.isdir(path): return # remove empty subfolders print(\"[INFO] Checking for empty folders in:%s\" % path) files = os.listdir(path) if len(files): for f in files: fullpath = os.path.join(path, f) if os.path.isdir(fullpath): removeEmptyFolders(fullpath) # if folder empty, delete it files = os.listdir(path) if len(files) == 0 and removeRoot: print(\"[INFO] Removing empty folder:%s\" % path) os.rmdir(path) directory = os.path.normpath(os.environ.get('NZBPP_DIRECTORY')) if os.environ.get('NZBPO_DESTINATIONDIRECTORY', False) and os.path.isdir(os.environ.get('NZBPO_DESTINATIONDIRECTORY')): destination = os.environ.get('NZBPO_DESTINATIONDIRECTORY') if os.environ.get('NZBPO_APPENDCATEGORIES') == 'yes': destination = os.path.join(destination, os.environ.get('NZBPP_CATEGORY')) else: destination = directory print(\"Flattening directory: %s\" % (directory)) for dirpath, dirnames, filenames in os.walk(directory): for fileName in filenames: outputFile = os.path.join(dirpath, fileName) if dirpath == destination: continue target = os.path.join(destination, fileName) try: shutil.move(outputFile, target) except: print(\"[ERROR] Could not flatten %s\" % outputFile) removeEmptyFolders(directory) # Cleanup empty directories sys.exit(NZBGET_POSTPROCESS_SUCCESS) HashRenamer.py More info can be found by TRaSH Guides #!/usr/bin/env python3 # ############################################################################## # Title: HashRenamer.py # # Author(s): l3uddz, desimaniac # # URL: https://github.com/l3uddz/nzbgetScripts # # Description: Renames hashed media files to match the source NZB. # # -- # # Part of the Cloudbox project: https://cloudbox.works # ############################################################################## ############################################################################## # Built on top of the NZBGet scripts template created by Clinton Hall # # (https://github.com/clinton-hall). # # Released under GNU General Public License v2.0 # ############################################################################## ############################################################################## ### NZBGET POST-PROCESSING SCRIPT ### # Rename files with hashes for file name # # NOTE: This script requires Python to be installed on your system. # ############################################################################## ### NZBGET POST-PROCESSING SCRIPT ### ############################################################################## import os import re import shutil import sys # NZBGet Exit Codes NZBGET_POSTPROCESS_PARCHECK = 92 NZBGET_POSTPROCESS_SUCCESS = 93 NZBGET_POSTPROCESS_ERROR = 94 NZBGET_POSTPROCESS_NONE = 95 ############################################################ # EXTENSION STUFF ############################################################ def do_check(): if 'NZBOP_SCRIPTDIR' not in os.environ: print(\"This script can only be called from NZBGet (11.0 or later).\") sys.exit(0) if os.environ['NZBOP_VERSION'][0:5] < '11.0': print(\"[ERROR] NZBGet Version %s is not supported. Please update NZBGet.\" % (str(os.environ['NZBOP_VERSION']))) sys.exit(0) print(\"Script triggered from NZBGet Version %s.\" % (str(os.environ['NZBOP_VERSION']))) status = 0 if 'NZBPP_TOTALSTATUS' in os.environ: if not os.environ['NZBPP_TOTALSTATUS'] == 'SUCCESS': print(\"[ERROR] Download failed with status %s.\" % (os.environ['NZBPP_STATUS'])) status = 1 else: # Check par status if os.environ['NZBPP_PARSTATUS'] == '1' or os.environ['NZBPP_PARSTATUS'] == '4': print(\"[ERROR] Par-repair failed, setting status \\\"failed\\\".\") status = 1 # Check unpack status if os.environ['NZBPP_UNPACKSTATUS'] == '1': print(\"[ERROR] Unpack failed, setting status \\\"failed\\\".\") status = 1 if os.environ['NZBPP_UNPACKSTATUS'] == '0' and os.environ['NZBPP_PARSTATUS'] == '0': # Unpack was skipped due to nzb-file properties or due to errors during par-check if os.environ['NZBPP_HEALTH'] < 1000: print(\"[ERROR] Download health is compromised and Par-check/repair disabled or no .par2 files found. \" \\ \"Setting status \\\"failed\\\".\") print(\"[ERROR] Please check your Par-check/repair settings for future downloads.\") status = 1 else: print(\"[ERROR] Par-check/repair disabled or no .par2 files found, and Unpack not required. Health is \" \\ \"ok so handle as though download successful.\") print(\"[WARNING] Please check your Par-check/repair settings for future downloads.\") # Check if destination directory exists (important for reprocessing of history items) if not os.path.isdir(os.environ['NZBPP_DIRECTORY']): print(\"[ERROR] Nothing to post-process: destination directory\", os.environ[ 'NZBPP_DIRECTORY'], \"doesn't exist. Setting status \\\"failed\\\".\") status = 1 # All checks done, now launching the script. if status == 1: sys.exit(NZBGET_POSTPROCESS_NONE) def get_file_name(path): try: file_name = os.path.basename(path) extensions = re.findall(r'\\.([^.]+)', file_name) ext = '.'.join(extensions) name = file_name.replace(\".%s\" % ext, '') return name, ext except Exception: pass return None def is_file_hash(file_name): hash_regexp = [ r'^[a-fA-F0-9]{40}$', r'^[a-fA-F0-9]{32}$', r'^[a-f0-9]{128}$', r'^[a-zA-Z0-9]{42}$' ] for hash in hash_regexp: if re.match(hash, file_name): return True return False def find_files(folder, extension=None, depth=None): file_list = [] start_count = folder.count(os.sep) for path, subdirs, files in os.walk(folder, topdown=True): for name in files: if depth and path.count(os.sep) - start_count >= depth: del subdirs[:] continue file = os.path.join(path, name) if not extension: file_list.append(file) else: if file.lower().endswith(extension.lower()): file_list.append(file) return sorted(file_list, key=lambda x: x.count(os.path.sep), reverse=True) ############################################################ # MAIN ############################################################ # do checks do_check() # retrieve required variables directory = os.path.normpath(os.environ['NZBPP_DIRECTORY']) nzb_name = os.environ['NZBPP_NZBFILENAME'] if nzb_name is None: print(\"[ERROR] Unable to retrieve NZBPP_NZBFILENAME\") sys.exit(NZBGET_POSTPROCESS_ERROR) nzb_name = nzb_name.replace('.nzb', '') print((\"[INFO] Using \\\"%s\\\" for hashed filenames\" % nzb_name)) print((\"[INFO] Scanning \\\"%s\\\" for hashed filenames\" % directory)) # scan for files found_files = find_files(directory) if not found_files: print((\"[INFO] No files were found in \\\"%s\\\"\" % directory)) sys.exit(NZBGET_POSTPROCESS_NONE) else: print((\"[INFO] Found %d files to check for hashed filenames\" % len(found_files))) # loop files checking for file hash moved_files = 0 for found_file_path in found_files: # set variable dir_name = os.path.dirname(found_file_path) file_name, file_ext = get_file_name(found_file_path) # is this a file hash if is_file_hash(file_name): new_file_path = os.path.join(dir_name, \"%s.%s\" % (nzb_name, file_ext)) print((\"[INFO] Moving \\\"%s\\\" to \\\"%s\\\"\" % (found_file_path, new_file_path))) try: shutil.move(found_file_path, new_file_path) moved_files += 1 except Exception: print((\"[ERROR] Failed moving \\\"%s\\\" to \\\"%s\\\"\" % (found_file_path, new_file_path))) print((\"[INFO] Finished processing \\\"%s\\\", moved %d files\" % (directory, moved_files))) sys.exit(NZBGET_POSTPROCESS_SUCCESS)","title":"In App Settings"},{"location":"applications/nzbget/in-app/#paths","text":"MainDir /nzb ScriptDir ${MainDir}/scripts","title":"Paths"},{"location":"applications/nzbget/in-app/#security","text":"ControlPassword NEWPASSWORD set this to something I will personally use AuthorizedIP 127.0.0.1,192.168.0.*,172.16.*.* This field is separated by commas. I added my Lan on there 192.168.0.* As well as the kubernetes Network 172.16.*.*","title":"Security"},{"location":"applications/nzbget/in-app/#catagories","text":"I use 5 catagories Movies is used by: Radarr I also always enable Remove Completed for NZBs Series is used by: Sonarr I also always enable Remove Completed for NZBs Music is used by: Lidarr I also always enable Remove Completed for NZBs Manual is ignored by all of my applications and only for my personal use Manga is for Komga Komga doesn't automatically import, I just decided to give it its own category anyway While creating these catagories, I ONLY changed the name, no other field was changed, the files once completed, will still go into their own directory as shown below.","title":"Catagories"},{"location":"applications/nzbget/in-app/#extension-scripts","text":"Extensions Clean.py, HashRenamer.py, Flatten.py Script Order Clean.py, Flatten.py, HashRenamer.py As long as the scripts are in your scripts directory you should be set Here is the code for the extensions I use, make sure to copy and paste them with the .py extensions and place them into your scripts folder Clean.py More info can be found by TRaSH Guides #!/usr/bin/env python3 # ############################################################################## ### NZBGET SCAN SCRIPT ### # Clean NZB name. # # Removes the following suffixes from NZB name: # NZBgeek / Obfuscated / BUYMORE / Scrambled. # # NOTE: This script requires Python to be installed on your system. ### NZBGET SCAN SCRIPT ### ############################################################################## from __future__ import print_function import os, re, sys # Exit codes used by NZBGet POSTPROCESS_SUCCESS=93 POSTPROCESS_ERROR=94 POSTPROCESS_SKIP=95 # Check if the script is called from NZBGet 13.0 or later if not 'NZBOP_SCRIPTDIR' in os.environ: print('*** NZBGet post-processing script ***') print('This script is supposed to be called from NZBGet (13.0 or later).') sys.exit(POSTPROCESS_ERROR) if not 'NZBNP_NZBNAME' in os.environ: print('[WARN] Filename not found in environment') sys.exit(POSTPROCESS_ERROR) fwp = os.environ['NZBNP_NZBNAME'] fwp = re.sub('(?i)-4P\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-4Planet\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-AsRequested\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-AsRequested-xpost\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-BUYMORE\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Chamele0n\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-GEROV\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-iNC0GNiTO\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-NZBGeek\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Obfuscated\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-postbot\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Rakuv\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-Scrambled\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-WhiteRev\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-xpost\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[eztv\\]\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[TGx\\]\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[TGx\\]-xpost\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)\\[ettv\\]\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-WRTEAM\\.nzb$', '.nzb', fwp) fwp = re.sub('(?i)-CAPTCHA\\.nzb$', '.nzb', fwp) fwp = re.sub(r'(\\-[^-.\\n]*)(\\-.{4})?\\.nzb$', r'\\1.nzb', fwp) if fwp: print('[NZB] NZBNAME=', fwp, sep='') sys.exit(POSTPROCESS_SUCCESS) Flatten.py This removes all of the sub-folders created by the unpack process More info can be found on the GitHub source #!/usr/bin/env python # ############################################################################## ### NZBGET POST-PROCESSING SCRIPT ### # Flatten all downloaded files into the root download directory. # # This removes all of the sub-folders created by the unpack process. # This should run before other scripts. # # NOTE: This script requires Python to be installed on your system. ############################################################################## ### OPTIONS ### # Destination Directory. # # Set the directory where you want all files to be moved to. # Use this if you want all downloaded files in a single \"root\" directory. # If left blank, files will all be \"flattened\" into the individual download's sub-directory. #DestinationDirectory= # Append Categories (yes, no). # # If using the Destination Directory above, then this option will append the download category. #AppendCategories=no ### NZBGET POST-PROCESSING SCRIPT ### ############################################################################## import os import sys import shutil # NZBGet Exit Codes NZBGET_POSTPROCESS_PARCHECK = 92 NZBGET_POSTPROCESS_SUCCESS = 93 NZBGET_POSTPROCESS_ERROR = 94 NZBGET_POSTPROCESS_NONE = 95 if 'NZBOP_SCRIPTDIR' not in os.environ: print(\"This script can only be called from NZBGet (11.0 or later).\") sys.exit(0) if os.environ['NZBOP_VERSION'][0:5] < '11.0': print(\"[ERROR] NZBGet Version %s is not supported. Please update NZBGet.\" % (str(os.environ['NZBOP_VERSION']))) sys.exit(0) print(\"Script triggered from NZBGet Version %s.\" % (str(os.environ['NZBOP_VERSION']))) status = 0 if 'NZBPP_TOTALSTATUS' in os.environ: if not os.environ['NZBPP_TOTALSTATUS'] == 'SUCCESS': print(\"[ERROR] Download failed with status %s.\" % (os.environ['NZBPP_STATUS'])) status = 1 else: # Check par status if os.environ.get('NZBPP_PARSTATUS') == '1' or os.environ.get('NZBPP_PARSTATUS') == '4': print(\"[ERROR] Par-repair failed, setting status \\\"failed\\\".\") status = 1 # Check unpack status if os.environ.get('NZBPP_UNPACKSTATUS') == '1': print(\"[ERROR] Unpack failed, setting status \\\"failed\\\".\") status = 1 if os.environ.get('NZBPP_UNPACKSTATUS') == '0' and os.environ.get('NZBPP_PARSTATUS') == '0': # Unpack was skipped due to nzb-file properties or due to errors during par-check if os.environ.get('NZBPP_HEALTH') < 1000: print(\"[ERROR] Download health is compromised and Par-check/repair disabled or no .par2 files found. Setting status \\\"failed\\\".\") print(\"[ERROR] Please check your Par-check/repair settings for future downloads.\") status = 1 else: print(\"[ERROR] Par-check/repair disabled or no .par2 files found, and Unpack not required. Health is ok so handle as though download successful.\") print(\"[WARNING] Please check your Par-check/repair settings for future downloads.\") # Check if destination directory exists (important for reprocessing of history items) if not os.path.isdir(os.environ.get('NZBPP_DIRECTORY')): print(\"[ERROR] Nothing to post-process: destination directory\", os.environ['NZBPP_DIRECTORY'], \"doesn't exist. Setting status \\\"failed\\\".\") status = 1 # All checks done, now launching the script. if status == 1: sys.exit(NZBGET_POSTPROCESS_NONE) def removeEmptyFolders(path, removeRoot=True): #Function to remove empty folders if not os.path.isdir(path): return # remove empty subfolders print(\"[INFO] Checking for empty folders in:%s\" % path) files = os.listdir(path) if len(files): for f in files: fullpath = os.path.join(path, f) if os.path.isdir(fullpath): removeEmptyFolders(fullpath) # if folder empty, delete it files = os.listdir(path) if len(files) == 0 and removeRoot: print(\"[INFO] Removing empty folder:%s\" % path) os.rmdir(path) directory = os.path.normpath(os.environ.get('NZBPP_DIRECTORY')) if os.environ.get('NZBPO_DESTINATIONDIRECTORY', False) and os.path.isdir(os.environ.get('NZBPO_DESTINATIONDIRECTORY')): destination = os.environ.get('NZBPO_DESTINATIONDIRECTORY') if os.environ.get('NZBPO_APPENDCATEGORIES') == 'yes': destination = os.path.join(destination, os.environ.get('NZBPP_CATEGORY')) else: destination = directory print(\"Flattening directory: %s\" % (directory)) for dirpath, dirnames, filenames in os.walk(directory): for fileName in filenames: outputFile = os.path.join(dirpath, fileName) if dirpath == destination: continue target = os.path.join(destination, fileName) try: shutil.move(outputFile, target) except: print(\"[ERROR] Could not flatten %s\" % outputFile) removeEmptyFolders(directory) # Cleanup empty directories sys.exit(NZBGET_POSTPROCESS_SUCCESS) HashRenamer.py More info can be found by TRaSH Guides #!/usr/bin/env python3 # ############################################################################## # Title: HashRenamer.py # # Author(s): l3uddz, desimaniac # # URL: https://github.com/l3uddz/nzbgetScripts # # Description: Renames hashed media files to match the source NZB. # # -- # # Part of the Cloudbox project: https://cloudbox.works # ############################################################################## ############################################################################## # Built on top of the NZBGet scripts template created by Clinton Hall # # (https://github.com/clinton-hall). # # Released under GNU General Public License v2.0 # ############################################################################## ############################################################################## ### NZBGET POST-PROCESSING SCRIPT ### # Rename files with hashes for file name # # NOTE: This script requires Python to be installed on your system. # ############################################################################## ### NZBGET POST-PROCESSING SCRIPT ### ############################################################################## import os import re import shutil import sys # NZBGet Exit Codes NZBGET_POSTPROCESS_PARCHECK = 92 NZBGET_POSTPROCESS_SUCCESS = 93 NZBGET_POSTPROCESS_ERROR = 94 NZBGET_POSTPROCESS_NONE = 95 ############################################################ # EXTENSION STUFF ############################################################ def do_check(): if 'NZBOP_SCRIPTDIR' not in os.environ: print(\"This script can only be called from NZBGet (11.0 or later).\") sys.exit(0) if os.environ['NZBOP_VERSION'][0:5] < '11.0': print(\"[ERROR] NZBGet Version %s is not supported. Please update NZBGet.\" % (str(os.environ['NZBOP_VERSION']))) sys.exit(0) print(\"Script triggered from NZBGet Version %s.\" % (str(os.environ['NZBOP_VERSION']))) status = 0 if 'NZBPP_TOTALSTATUS' in os.environ: if not os.environ['NZBPP_TOTALSTATUS'] == 'SUCCESS': print(\"[ERROR] Download failed with status %s.\" % (os.environ['NZBPP_STATUS'])) status = 1 else: # Check par status if os.environ['NZBPP_PARSTATUS'] == '1' or os.environ['NZBPP_PARSTATUS'] == '4': print(\"[ERROR] Par-repair failed, setting status \\\"failed\\\".\") status = 1 # Check unpack status if os.environ['NZBPP_UNPACKSTATUS'] == '1': print(\"[ERROR] Unpack failed, setting status \\\"failed\\\".\") status = 1 if os.environ['NZBPP_UNPACKSTATUS'] == '0' and os.environ['NZBPP_PARSTATUS'] == '0': # Unpack was skipped due to nzb-file properties or due to errors during par-check if os.environ['NZBPP_HEALTH'] < 1000: print(\"[ERROR] Download health is compromised and Par-check/repair disabled or no .par2 files found. \" \\ \"Setting status \\\"failed\\\".\") print(\"[ERROR] Please check your Par-check/repair settings for future downloads.\") status = 1 else: print(\"[ERROR] Par-check/repair disabled or no .par2 files found, and Unpack not required. Health is \" \\ \"ok so handle as though download successful.\") print(\"[WARNING] Please check your Par-check/repair settings for future downloads.\") # Check if destination directory exists (important for reprocessing of history items) if not os.path.isdir(os.environ['NZBPP_DIRECTORY']): print(\"[ERROR] Nothing to post-process: destination directory\", os.environ[ 'NZBPP_DIRECTORY'], \"doesn't exist. Setting status \\\"failed\\\".\") status = 1 # All checks done, now launching the script. if status == 1: sys.exit(NZBGET_POSTPROCESS_NONE) def get_file_name(path): try: file_name = os.path.basename(path) extensions = re.findall(r'\\.([^.]+)', file_name) ext = '.'.join(extensions) name = file_name.replace(\".%s\" % ext, '') return name, ext except Exception: pass return None def is_file_hash(file_name): hash_regexp = [ r'^[a-fA-F0-9]{40}$', r'^[a-fA-F0-9]{32}$', r'^[a-f0-9]{128}$', r'^[a-zA-Z0-9]{42}$' ] for hash in hash_regexp: if re.match(hash, file_name): return True return False def find_files(folder, extension=None, depth=None): file_list = [] start_count = folder.count(os.sep) for path, subdirs, files in os.walk(folder, topdown=True): for name in files: if depth and path.count(os.sep) - start_count >= depth: del subdirs[:] continue file = os.path.join(path, name) if not extension: file_list.append(file) else: if file.lower().endswith(extension.lower()): file_list.append(file) return sorted(file_list, key=lambda x: x.count(os.path.sep), reverse=True) ############################################################ # MAIN ############################################################ # do checks do_check() # retrieve required variables directory = os.path.normpath(os.environ['NZBPP_DIRECTORY']) nzb_name = os.environ['NZBPP_NZBFILENAME'] if nzb_name is None: print(\"[ERROR] Unable to retrieve NZBPP_NZBFILENAME\") sys.exit(NZBGET_POSTPROCESS_ERROR) nzb_name = nzb_name.replace('.nzb', '') print((\"[INFO] Using \\\"%s\\\" for hashed filenames\" % nzb_name)) print((\"[INFO] Scanning \\\"%s\\\" for hashed filenames\" % directory)) # scan for files found_files = find_files(directory) if not found_files: print((\"[INFO] No files were found in \\\"%s\\\"\" % directory)) sys.exit(NZBGET_POSTPROCESS_NONE) else: print((\"[INFO] Found %d files to check for hashed filenames\" % len(found_files))) # loop files checking for file hash moved_files = 0 for found_file_path in found_files: # set variable dir_name = os.path.dirname(found_file_path) file_name, file_ext = get_file_name(found_file_path) # is this a file hash if is_file_hash(file_name): new_file_path = os.path.join(dir_name, \"%s.%s\" % (nzb_name, file_ext)) print((\"[INFO] Moving \\\"%s\\\" to \\\"%s\\\"\" % (found_file_path, new_file_path))) try: shutil.move(found_file_path, new_file_path) moved_files += 1 except Exception: print((\"[ERROR] Failed moving \\\"%s\\\" to \\\"%s\\\"\" % (found_file_path, new_file_path))) print((\"[INFO] Finished processing \\\"%s\\\", moved %d files\" % (directory, moved_files))) sys.exit(NZBGET_POSTPROCESS_SUCCESS)","title":"Extension Scripts"},{"location":"applications/nzbget/installation/","text":"Networking \u00b6 The setup is completely default However, if you are wanting to use ingress, its probably better to use clusterIP instead Storage \u00b6 Configuration \u00b6 The setup is also default Data \u00b6 I always mount to the root directory of the container","title":"Installation"},{"location":"applications/nzbget/installation/#networking","text":"The setup is completely default However, if you are wanting to use ingress, its probably better to use clusterIP instead","title":"Networking"},{"location":"applications/nzbget/installation/#storage","text":"","title":"Storage"},{"location":"applications/nzbget/installation/#configuration","text":"The setup is also default","title":"Configuration"},{"location":"applications/nzbget/installation/#data","text":"I always mount to the root directory of the container","title":"Data"},{"location":"applications/qbittorrent/about/","text":"Purpose \u00b6 I personally use this to: Download Torrent Files Sonarr/Radarr/Lidarr all send their Torrent download requests to qBittorrent Specifically, I use qBittorrent with a Mullvad VPN on my home network, with only public trackers. For my private trackers I use a seedbox with rTorrent (guide coming soon). I do not personally believe qBit is the BEST bittorrent client for seedboxes, unless that seedbox can also download qBit manage. Sources \u00b6 Website \u00b6 Important information regarding qBittorrent Github \u00b6 Source code for the project, active issues etc.","title":"About"},{"location":"applications/qbittorrent/about/#purpose","text":"I personally use this to: Download Torrent Files Sonarr/Radarr/Lidarr all send their Torrent download requests to qBittorrent Specifically, I use qBittorrent with a Mullvad VPN on my home network, with only public trackers. For my private trackers I use a seedbox with rTorrent (guide coming soon). I do not personally believe qBit is the BEST bittorrent client for seedboxes, unless that seedbox can also download qBit manage.","title":"Purpose"},{"location":"applications/qbittorrent/about/#sources","text":"","title":"Sources"},{"location":"applications/qbittorrent/about/#website","text":"Important information regarding qBittorrent","title":"Website"},{"location":"applications/qbittorrent/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/qbittorrent/datasets/","text":"This is the location your completed bittorrent files will be located Typical setting user:group to apps , nothing fancy here Placed the created nzb dataset within the downloads folder Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it.","title":"Datasets"},{"location":"applications/qbittorrent/in-app/","text":"Downloads \u00b6 qBittorrent Table + Explanation Setting Value Explanation Default Torrent Management Mode: Automatic This is to automatically move the files torrents based on catagory When Torrent Category changed: Relocate Torrent This is to automatically move the files torrents based on catagory When Default Save Path changed: Relocate Affected Torrents This is to automatically move the files torrents based on catagory When Category Save Path changed: Relocate Affected Torrents This is to automatically move the files torrents based on catagory Default Save Path: /qbitvpn/complete Set this to what you set your dataset mountpoint as Keep incomplete torrents in: /qbitvpn/temp Keep incomplete torrents in a folder no apps are monitoring Copy .torrent files for finished downloads to: /qbitvpn/backup Its nice to have a backup folder of all your .torrents in the event of a crash Monitored Folder /qbitvpn/monitor Place .torrent files in this directory to automatically start those torrents Connection \u00b6 This should equal to your listening port you set during the installation Speed \u00b6 Set Alternative Rate Limits to 10000 KiB This is so during the day, or when users are using my Plex server, my qBittorrent instance isn't using ALL of my bandwidth seeding Set my schedule from 08:00 to 02:00 8am to 2am, which is around the time users are watching Plex BitTorrent \u00b6 Disabled Local Peer Discovery This is only useful if you are on a huge network, like a college campus or something like that WebGUI \u00b6 Changed the password to something I would remember Added both my LAN and Kubernetes LAN to the bypass list, this way neither of them have to authenticate, it gets annoying to log in over and over on your own network Bypass authentication for clients in whitelisted IP subnets 192.168.0.0/16 172.16.0.0/16 Since I am using Traefik , I decided to add the Kubernetes LAN to: Enable reverse proxy support 172.16.0.0/16 Advanced \u00b6 qBittorrent Table + Explanation Setting Value Explanation Network interface: wg0 or tun0 Bind this to wg0 or tun0 if you are using Wireguard (wg0) or Openvpn(tun0) Optional IP address to bind to: All Ipv4 Addresses Kubernetes doesnt support ipv6 now anyway so, I set this to just ipv4 Resolve peer countries: True Just so I can see what countries I am leeching/seeding from Reannounce to all trackers when IP or port changed: True In the event my IP or port changes, I want everyone to know, so I can seed or leech","title":"In App Settings"},{"location":"applications/qbittorrent/in-app/#downloads","text":"qBittorrent Table + Explanation Setting Value Explanation Default Torrent Management Mode: Automatic This is to automatically move the files torrents based on catagory When Torrent Category changed: Relocate Torrent This is to automatically move the files torrents based on catagory When Default Save Path changed: Relocate Affected Torrents This is to automatically move the files torrents based on catagory When Category Save Path changed: Relocate Affected Torrents This is to automatically move the files torrents based on catagory Default Save Path: /qbitvpn/complete Set this to what you set your dataset mountpoint as Keep incomplete torrents in: /qbitvpn/temp Keep incomplete torrents in a folder no apps are monitoring Copy .torrent files for finished downloads to: /qbitvpn/backup Its nice to have a backup folder of all your .torrents in the event of a crash Monitored Folder /qbitvpn/monitor Place .torrent files in this directory to automatically start those torrents","title":"Downloads"},{"location":"applications/qbittorrent/in-app/#connection","text":"This should equal to your listening port you set during the installation","title":"Connection"},{"location":"applications/qbittorrent/in-app/#speed","text":"Set Alternative Rate Limits to 10000 KiB This is so during the day, or when users are using my Plex server, my qBittorrent instance isn't using ALL of my bandwidth seeding Set my schedule from 08:00 to 02:00 8am to 2am, which is around the time users are watching Plex","title":"Speed"},{"location":"applications/qbittorrent/in-app/#bittorrent","text":"Disabled Local Peer Discovery This is only useful if you are on a huge network, like a college campus or something like that","title":"BitTorrent"},{"location":"applications/qbittorrent/in-app/#webgui","text":"Changed the password to something I would remember Added both my LAN and Kubernetes LAN to the bypass list, this way neither of them have to authenticate, it gets annoying to log in over and over on your own network Bypass authentication for clients in whitelisted IP subnets 192.168.0.0/16 172.16.0.0/16 Since I am using Traefik , I decided to add the Kubernetes LAN to: Enable reverse proxy support 172.16.0.0/16","title":"WebGUI"},{"location":"applications/qbittorrent/in-app/#advanced","text":"qBittorrent Table + Explanation Setting Value Explanation Network interface: wg0 or tun0 Bind this to wg0 or tun0 if you are using Wireguard (wg0) or Openvpn(tun0) Optional IP address to bind to: All Ipv4 Addresses Kubernetes doesnt support ipv6 now anyway so, I set this to just ipv4 Resolve peer countries: True Just so I can see what countries I am leeching/seeding from Reannounce to all trackers when IP or port changed: True In the event my IP or port changes, I want everyone to know, so I can seed or leech","title":"Advanced"},{"location":"applications/qbittorrent/installation/","text":"Networking \u00b6 If you are wanting to use ingress, its probably better to use clusterIP instead of Simple WebGUI \u00b6 I left this default since there was no reason for me to change the WebGUI port This is ALSO the port Sonarr/Radarr and other services will use to connect to qBittorrent Listening Ports \u00b6 With VPN No need to port forward on your router If you want fast seeding, you will need a service that supports port forwarding I use Mullvad, and changed the two ports below to the port that was allocated to me by Mullvad Without VPN You can leave the two ports default without a VPN If you want fast seeding though, you will need to port forward this port on your router Storage \u00b6 Configuration \u00b6 The setup is default Data \u00b6 I always mount to the root directory of the container I also try to use the applications name for the mountpath, since its typically never going to be a file or folder thats already present VPN \u00b6 Using a Wireguard setup Added the kubernetes network, as well as my LAN network to the killswitch","title":"Installation"},{"location":"applications/qbittorrent/installation/#networking","text":"If you are wanting to use ingress, its probably better to use clusterIP instead of Simple","title":"Networking"},{"location":"applications/qbittorrent/installation/#webgui","text":"I left this default since there was no reason for me to change the WebGUI port This is ALSO the port Sonarr/Radarr and other services will use to connect to qBittorrent","title":"WebGUI"},{"location":"applications/qbittorrent/installation/#listening-ports","text":"With VPN No need to port forward on your router If you want fast seeding, you will need a service that supports port forwarding I use Mullvad, and changed the two ports below to the port that was allocated to me by Mullvad Without VPN You can leave the two ports default without a VPN If you want fast seeding though, you will need to port forward this port on your router","title":"Listening Ports"},{"location":"applications/qbittorrent/installation/#storage","text":"","title":"Storage"},{"location":"applications/qbittorrent/installation/#configuration","text":"The setup is default","title":"Configuration"},{"location":"applications/qbittorrent/installation/#data","text":"I always mount to the root directory of the container I also try to use the applications name for the mountpath, since its typically never going to be a file or folder thats already present","title":"Data"},{"location":"applications/qbittorrent/installation/#vpn","text":"Using a Wireguard setup Added the kubernetes network, as well as my LAN network to the killswitch","title":"VPN"},{"location":"applications/radarr/about/","text":"Purpose \u00b6 I personally use this to: Download Movies It becomes even more powerful when tied with other applications/services I am using Notifiarr TRaSH Guides For a more in-depth explanation, I would click on the github link below Sources \u00b6 Website \u00b6 Important information regarding Radarr Github \u00b6 Source code for the project, active issues etc.","title":"About"},{"location":"applications/radarr/about/#purpose","text":"I personally use this to: Download Movies It becomes even more powerful when tied with other applications/services I am using Notifiarr TRaSH Guides For a more in-depth explanation, I would click on the github link below","title":"Purpose"},{"location":"applications/radarr/about/#sources","text":"","title":"Sources"},{"location":"applications/radarr/about/#website","text":"Important information regarding Radarr","title":"Website"},{"location":"applications/radarr/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/radarr/in-app/","text":"Video \u00b6 For Radarr, I specifically just follow the TRaSH Guides for Radarr setup. It clearly details how to setup custom profiles to ensure you are grabbing the latest and greatest media. I have been using it for months now and have not had an issue. Thank Goodness for IBRACORP, I thought I would have to make a video myself covering this topic. However, it seems they got most of everything I would have covered.","title":"In app"},{"location":"applications/radarr/in-app/#video","text":"For Radarr, I specifically just follow the TRaSH Guides for Radarr setup. It clearly details how to setup custom profiles to ensure you are grabbing the latest and greatest media. I have been using it for months now and have not had an issue. Thank Goodness for IBRACORP, I thought I would have to make a video myself covering this topic. However, it seems they got most of everything I would have covered.","title":"Video"},{"location":"applications/radarr/installation/","text":"Networking \u00b6 If you are wanting to use ingress, its probably better to use clusterIP instead I changed the UDP and TCP port to match the Mullvad ports allocated to me Storage \u00b6 Configuration \u00b6 The setup is default Media - Destination Folders \u00b6 Media is so that Radarr will have a location to place files once they're completed This will be the folder Radarr places files for plex to then parse through. Backups \u00b6 '/config/Backups' is the location Radarr places its automatic and manual backups I created a separate dataset meant for backups, specifically to have an easy way to restore a backup, in the event the application is wrongly deleted, or removed, corrupt, whatever NZB \u00b6 This is obviously the location Radarr will look for completed NZB files Its also the location NZBGet saves its completed movie files Bittorrent \u00b6 This is the location Radarr will look for completed qBittorrent files Its also the location qBittorrent saves its completed movie files Syncthing \u00b6 This is the location Radarr will look for completed Syncthing files Its also the location Syncthing saves its completed movie files","title":"Installation"},{"location":"applications/radarr/installation/#networking","text":"If you are wanting to use ingress, its probably better to use clusterIP instead I changed the UDP and TCP port to match the Mullvad ports allocated to me","title":"Networking"},{"location":"applications/radarr/installation/#storage","text":"","title":"Storage"},{"location":"applications/radarr/installation/#configuration","text":"The setup is default","title":"Configuration"},{"location":"applications/radarr/installation/#media-destination-folders","text":"Media is so that Radarr will have a location to place files once they're completed This will be the folder Radarr places files for plex to then parse through.","title":"Media - Destination Folders"},{"location":"applications/radarr/installation/#backups","text":"'/config/Backups' is the location Radarr places its automatic and manual backups I created a separate dataset meant for backups, specifically to have an easy way to restore a backup, in the event the application is wrongly deleted, or removed, corrupt, whatever","title":"Backups"},{"location":"applications/radarr/installation/#nzb","text":"This is obviously the location Radarr will look for completed NZB files Its also the location NZBGet saves its completed movie files","title":"NZB"},{"location":"applications/radarr/installation/#bittorrent","text":"This is the location Radarr will look for completed qBittorrent files Its also the location qBittorrent saves its completed movie files","title":"Bittorrent"},{"location":"applications/radarr/installation/#syncthing","text":"This is the location Radarr will look for completed Syncthing files Its also the location Syncthing saves its completed movie files","title":"Syncthing"},{"location":"applications/radarr/nzbget/","text":"Mountpoints \u00b6 Its important to keep your mountpoints for each of the applications the same. Otherwise you will need to setup a remote path They may be slightly different, but as long as they have the same root directory it will be fine. Radarrs Storage Settings \u00b6 NZBGet Storage Settings \u00b6 Linking Radarr to NZBGet \u00b6 Explanation \u00b6 Explanation Name Value Reason Name NZBGet Doesn't matter what you call it, just call it something memorable Host nzbget.ix-nzbget.svc.cluster.local You will need to generate a different DNS name if your app name is not nzbget Generate a new name with Truecharts Guide Port 6789 This is the default port, but if you changed it then its the only port listed under networking for NZBGet Username nzbget Default is nzbget but its under your security settings in nzbget Password NULL This is whatever you set during the NZBGet in app security setup Category Movies I want my completed nzbs to be moved to a folder in completed/Movies once their done Remove Completed True You can't seed nzbs, so there's no point in keeping them Remove Failed True No reason to keep failed articles","title":"NZBGet"},{"location":"applications/radarr/nzbget/#mountpoints","text":"Its important to keep your mountpoints for each of the applications the same. Otherwise you will need to setup a remote path They may be slightly different, but as long as they have the same root directory it will be fine.","title":"Mountpoints"},{"location":"applications/radarr/nzbget/#radarrs-storage-settings","text":"","title":"Radarrs Storage Settings"},{"location":"applications/radarr/nzbget/#nzbget-storage-settings","text":"","title":"NZBGet Storage Settings"},{"location":"applications/radarr/nzbget/#linking-radarr-to-nzbget","text":"","title":"Linking Radarr to NZBGet"},{"location":"applications/radarr/nzbget/#explanation","text":"Explanation Name Value Reason Name NZBGet Doesn't matter what you call it, just call it something memorable Host nzbget.ix-nzbget.svc.cluster.local You will need to generate a different DNS name if your app name is not nzbget Generate a new name with Truecharts Guide Port 6789 This is the default port, but if you changed it then its the only port listed under networking for NZBGet Username nzbget Default is nzbget but its under your security settings in nzbget Password NULL This is whatever you set during the NZBGet in app security setup Category Movies I want my completed nzbs to be moved to a folder in completed/Movies once their done Remove Completed True You can't seed nzbs, so there's no point in keeping them Remove Failed True No reason to keep failed articles","title":"Explanation"},{"location":"applications/radarr/qbittorrent/","text":"Mountpoints \u00b6 Its important to keep your mountpoints for each of the applications the same. Otherwise you will need to setup a remote path They may be slightly different, but as long as they have the same root directory it will be fine. Radarrs Storage Settings \u00b6 I set it to a sub directory of /qbitvpn though since /qbitvpn/complete/movies is the only directory Radarr needs to see, since it only needs to see movies that are completed qBittorrents Storage Settings \u00b6 Linking Radarr to qBittorrent \u00b6 Explanation \u00b6 Explanation Name Value Reason Name qbitvpn Doesn't matter what you call it, just call it something memorable Host qbitvpn-qbittorrent.ix-qbitvpn.svc.cluster.local You will need to generate a different DNS name if your app name is not qbitvpn Generate a new name with Truecharts Guide Port 10095 This is the default port, but if you changed it then its the first port listed under networking for qbittorrent Username NULL You can leave this empty if you followed WEBGUI guide Password NULL You can leave this empty if you followed WEBGUI guide Category movies I want my completed torrents to be moved to a folder in completed/movies once their done Remove Completed False I do not want to delete my torrents before their done seeding","title":"qBittorrent"},{"location":"applications/radarr/qbittorrent/#mountpoints","text":"Its important to keep your mountpoints for each of the applications the same. Otherwise you will need to setup a remote path They may be slightly different, but as long as they have the same root directory it will be fine.","title":"Mountpoints"},{"location":"applications/radarr/qbittorrent/#radarrs-storage-settings","text":"I set it to a sub directory of /qbitvpn though since /qbitvpn/complete/movies is the only directory Radarr needs to see, since it only needs to see movies that are completed","title":"Radarrs Storage Settings"},{"location":"applications/radarr/qbittorrent/#qbittorrents-storage-settings","text":"","title":"qBittorrents Storage Settings"},{"location":"applications/radarr/qbittorrent/#linking-radarr-to-qbittorrent","text":"","title":"Linking Radarr to qBittorrent"},{"location":"applications/radarr/qbittorrent/#explanation","text":"Explanation Name Value Reason Name qbitvpn Doesn't matter what you call it, just call it something memorable Host qbitvpn-qbittorrent.ix-qbitvpn.svc.cluster.local You will need to generate a different DNS name if your app name is not qbitvpn Generate a new name with Truecharts Guide Port 10095 This is the default port, but if you changed it then its the first port listed under networking for qbittorrent Username NULL You can leave this empty if you followed WEBGUI guide Password NULL You can leave this empty if you followed WEBGUI guide Category movies I want my completed torrents to be moved to a folder in completed/movies once their done Remove Completed False I do not want to delete my torrents before their done seeding","title":"Explanation"},{"location":"applications/sonarr/about/","text":"Purpose \u00b6 I personally use this to: Download Series It becomes even more powerful when tied with other applications/services I am using Notifiarr TRaSH Guides For a more in-depth explanation, I would click on the github link below Sources \u00b6 Website \u00b6 Important information regarding Sonarr Github \u00b6 Source code for the project, active issues etc.","title":"About"},{"location":"applications/sonarr/about/#purpose","text":"I personally use this to: Download Series It becomes even more powerful when tied with other applications/services I am using Notifiarr TRaSH Guides For a more in-depth explanation, I would click on the github link below","title":"Purpose"},{"location":"applications/sonarr/about/#sources","text":"","title":"Sources"},{"location":"applications/sonarr/about/#website","text":"Important information regarding Sonarr","title":"Website"},{"location":"applications/sonarr/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/sonarr/in-app/","text":"Video \u00b6 For Sonarr, I specifically just follow the TRaSH Guides for Sonarr setup. It clearly details how to setup custom profiles to ensure you are grabbing the latest and greatest media. I have been using it for months now and have not had an issue. Thank Goodness for IBRACORP, I thought I would have to make a video myself covering this topic. However, it seems they got most of everything I would have covered.","title":"In App Settings"},{"location":"applications/sonarr/in-app/#video","text":"For Sonarr, I specifically just follow the TRaSH Guides for Sonarr setup. It clearly details how to setup custom profiles to ensure you are grabbing the latest and greatest media. I have been using it for months now and have not had an issue. Thank Goodness for IBRACORP, I thought I would have to make a video myself covering this topic. However, it seems they got most of everything I would have covered.","title":"Video"},{"location":"applications/sonarr/installation/","text":"For this application I used the Custom-App provided by TrueCharts . Available under the stable train Container \u00b6 So, this is going to be a bit different, but I actually use custom-app for this application At the time of creating this application, I needed the additional features only available in the nightly version of the application However, you would probably be fine setting this up like the Radarr setup (using the regular Truecharts version), as the enhancements are now apart of the stable image Networking \u00b6 If you are wanting to use ingress, its probably better to use clusterIP instead I changed the UDP and TCP port to match the Mullvad ports allocated to me Storage \u00b6 Configuration \u00b6 The setup is default Media - Destination Folders \u00b6 Media is so that Radarr will have a location to place files once they're completed This will be the folder Radarr places files for plex to then parse through. Backups \u00b6 '/config/Backups' is the location Radarr places its automatic and manual backups I created a separate dataset meant for backups, specifically to have an easy way to restore a backup, in the event the application is wrongly deleted, or removed, corrupt, whatever NZB \u00b6 This is obviously the location Radarr will look for completed NZB files Its also the location NZBGet saves its completed movie files Bittorrent \u00b6 This is the location Radarr will look for completed qBittorrent files Its also the location qBittorrent saves its completed movie files Syncthing \u00b6 This is the location Radarr will look for completed Syncthing files Its also the location Syncthing saves its completed movie files Permissions \u00b6 Again, you can bypass this step if you use the regular Truecharts version of the Sonarr application","title":"Installation"},{"location":"applications/sonarr/installation/#container","text":"So, this is going to be a bit different, but I actually use custom-app for this application At the time of creating this application, I needed the additional features only available in the nightly version of the application However, you would probably be fine setting this up like the Radarr setup (using the regular Truecharts version), as the enhancements are now apart of the stable image","title":"Container"},{"location":"applications/sonarr/installation/#networking","text":"If you are wanting to use ingress, its probably better to use clusterIP instead I changed the UDP and TCP port to match the Mullvad ports allocated to me","title":"Networking"},{"location":"applications/sonarr/installation/#storage","text":"","title":"Storage"},{"location":"applications/sonarr/installation/#configuration","text":"The setup is default","title":"Configuration"},{"location":"applications/sonarr/installation/#media-destination-folders","text":"Media is so that Radarr will have a location to place files once they're completed This will be the folder Radarr places files for plex to then parse through.","title":"Media - Destination Folders"},{"location":"applications/sonarr/installation/#backups","text":"'/config/Backups' is the location Radarr places its automatic and manual backups I created a separate dataset meant for backups, specifically to have an easy way to restore a backup, in the event the application is wrongly deleted, or removed, corrupt, whatever","title":"Backups"},{"location":"applications/sonarr/installation/#nzb","text":"This is obviously the location Radarr will look for completed NZB files Its also the location NZBGet saves its completed movie files","title":"NZB"},{"location":"applications/sonarr/installation/#bittorrent","text":"This is the location Radarr will look for completed qBittorrent files Its also the location qBittorrent saves its completed movie files","title":"Bittorrent"},{"location":"applications/sonarr/installation/#syncthing","text":"This is the location Radarr will look for completed Syncthing files Its also the location Syncthing saves its completed movie files","title":"Syncthing"},{"location":"applications/sonarr/installation/#permissions","text":"Again, you can bypass this step if you use the regular Truecharts version of the Sonarr application","title":"Permissions"},{"location":"applications/syncthing/about/","text":"Purpose \u00b6 I personally use this to: Sync media from my Seedbox to my local Truenas SCALE server and vice versa. Movie/Series requests are sent from Radarr/Sonarr to my Seedbox After the torrents are complete, they are moved to a folder Syncthing is monitoring Syncthing (on my seedbox), will communicate with Syncthing (on my Truenas SCALE server), notifying it of new files A connection will establish, and the files will be transferred to my Truenas SCALE server After the syncronization is complete, Sonarr/Radarr will see a new completed file in the Syncthing folder Sonarr/Radarr will pull that file from the completed folder into my media folder, where Plex can finally see it Sources \u00b6 Website \u00b6 Important information regarding Syncthing Github \u00b6 Source code for the project, active issues etc.","title":"About"},{"location":"applications/syncthing/about/#purpose","text":"I personally use this to: Sync media from my Seedbox to my local Truenas SCALE server and vice versa. Movie/Series requests are sent from Radarr/Sonarr to my Seedbox After the torrents are complete, they are moved to a folder Syncthing is monitoring Syncthing (on my seedbox), will communicate with Syncthing (on my Truenas SCALE server), notifying it of new files A connection will establish, and the files will be transferred to my Truenas SCALE server After the syncronization is complete, Sonarr/Radarr will see a new completed file in the Syncthing folder Sonarr/Radarr will pull that file from the completed folder into my media folder, where Plex can finally see it","title":"Purpose"},{"location":"applications/syncthing/about/#sources","text":"","title":"Sources"},{"location":"applications/syncthing/about/#website","text":"Important information regarding Syncthing","title":"Website"},{"location":"applications/syncthing/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/syncthing/cron/","text":"I am running a cron job which find files or folders that have been there for 2 or more days, then deletes them. Reasoning \u00b6 My setup has Syncthing pull in files from my remote seedbox, then places them in /mnt/speed/downloads/syncthing/ , where it is then picked up by Sonarr or Radarr, and copied to my media folder, so Plex can see it. Well, after those files are copied from my Syncthing folder by Sonarr/Radarr, how are they deleted? Easy, with the script below tied to a cron job, so we can automatically run the command on our own schedule. Cron Job \u00b6 Command find /mnt/speed/downloads/syncthing/*/* -mtime +2 -delete Run As User apps Since apps is the owner of the dataset, it makes sense to run the command as apps Schedule Up to you, I run mine daily at 12:00 AM Check Boxes I hide Standard Output and Standard Error They both produce annoying messages saying that either the file doesn't exist (because it couldn't find a file to delete) or reports \"error\" messages that really don't matter.","title":"Cron Job"},{"location":"applications/syncthing/cron/#reasoning","text":"My setup has Syncthing pull in files from my remote seedbox, then places them in /mnt/speed/downloads/syncthing/ , where it is then picked up by Sonarr or Radarr, and copied to my media folder, so Plex can see it. Well, after those files are copied from my Syncthing folder by Sonarr/Radarr, how are they deleted? Easy, with the script below tied to a cron job, so we can automatically run the command on our own schedule.","title":"Reasoning"},{"location":"applications/syncthing/cron/#cron-job","text":"Command find /mnt/speed/downloads/syncthing/*/* -mtime +2 -delete Run As User apps Since apps is the owner of the dataset, it makes sense to run the command as apps Schedule Up to you, I run mine daily at 12:00 AM Check Boxes I hide Standard Output and Standard Error They both produce annoying messages saying that either the file doesn't exist (because it couldn't find a file to delete) or reports \"error\" messages that really don't matter.","title":"Cron Job"},{"location":"applications/syncthing/datasets/","text":"This is another application I had to leave wide-open to get to work properly. For some reason, using the regular permissions settings would result in permissions errors off and on, it was incredibly annoying. So, as you can see I created a POSIX ACL and set all of the users to apps and I gave other full permissions as well. Unsafe I know, but I really could not find another way to get this working. Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it.","title":"Datasets"},{"location":"applications/syncthing/establish/","text":"Connecting Local to Remote \u00b6 Copying Remote ID \u00b6 First, you need to go to your Seedbox Syncthing machine and get its ID. Connecting Servers \u00b6 Launching the connection \u00b6 Second, open your Truenas Syncthing instance and add a new connection Click Add Remote Device Device ID This is the string of text your just copied Device Name This is the name you are setting for your Seedbox, I named mine Seedbox Afterwards, Click Save , I do not change any settings in the other two columns Accepting the Connection \u00b6 Now, go to your Seedbox Syncthing and you should see this prompt: Click Add Device if thats the correct device trying to connect Device ID This should be pre-filled out, leave it Device Name This is the name you are setting for your Truenas Scale Syncthing, I named mine Truenas Scale Afterwards, Click Save , I do not change any settings in the other two columns Final Result \u00b6 Now you should have a new device under Remote Devices , and it should say Connected (Unused)","title":"Establishing Connection"},{"location":"applications/syncthing/establish/#connecting-local-to-remote","text":"","title":"Connecting Local to Remote"},{"location":"applications/syncthing/establish/#copying-remote-id","text":"First, you need to go to your Seedbox Syncthing machine and get its ID.","title":"Copying Remote ID"},{"location":"applications/syncthing/establish/#connecting-servers","text":"","title":"Connecting Servers"},{"location":"applications/syncthing/establish/#launching-the-connection","text":"Second, open your Truenas Syncthing instance and add a new connection Click Add Remote Device Device ID This is the string of text your just copied Device Name This is the name you are setting for your Seedbox, I named mine Seedbox Afterwards, Click Save , I do not change any settings in the other two columns","title":"Launching the connection"},{"location":"applications/syncthing/establish/#accepting-the-connection","text":"Now, go to your Seedbox Syncthing and you should see this prompt: Click Add Device if thats the correct device trying to connect Device ID This should be pre-filled out, leave it Device Name This is the name you are setting for your Truenas Scale Syncthing, I named mine Truenas Scale Afterwards, Click Save , I do not change any settings in the other two columns","title":"Accepting the Connection"},{"location":"applications/syncthing/establish/#final-result","text":"Now you should have a new device under Remote Devices , and it should say Connected (Unused)","title":"Final Result"},{"location":"applications/syncthing/folder_setup/","text":"Local Setup \u00b6 Click Add Folder General \u00b6 Folder Label Name this whatever Folder ID Pre-filled, ignore it Folder Path /syncthing This needs to be the same Mount Point you set during installation Sharing \u00b6 Check the box next to the server you wish to share this folder with, in my case it is Seedbox Ignore \u00b6 Check Add ignore Patterns After clicking save, a window will come up asking what we want out patterns to be Advanced \u00b6 Explanation Name Value Reason Watch For Changes Checked This watches for changes without doing an entire folder scan So when new files are added, it doesn't have to wait for the scan to see them Folder Type Send & Receive This is important for deleting the old hardlinks rTorrent creates File Pull Order Oldest First I want the file/folder that was FIRST added to the list to be synced Rather than having files come out of order Ignore Permissions Checked This helps solve the issues with Syncthings weird permissions issue on SCALE Ignore Prompt \u00b6 As of right now I only include /ignore in here. This is in the event I want to add something to my my Truenas SCALE folder, but have it NOT sent to my Seedbox Syncthing Remote Setup \u00b6 Now you need to go to your Seedbox Syncthing and accept the new folder, and fill out the same settings General \u00b6 Folder Label Name this whatever Folder ID Pre-filled, ignore it Folder Path The folder path is not as easy as it is to get locally.. This needs to be set to your Bittorrent Completed Downloads folder If you plan on using my exact setup, expand the option below rTorrent Save Path I use rTorrent, because it actually supports hard-links, unlike pretty much ANY other torrent client for whatever reason.. We will specifically use the file path listed under Autotools -> Path to finished downloads , because this is where our hardlinks are created. Hard-links are awesome because they create instructions from the completed torrent, to our save location. So theres no need to copy, or move files just to get them to where Syncthing can see them. AND, once the script in the cron job section deletes the file on our Truenas SCALE server, the hard-link is deleted from the Seedbox as well, but the torrents will continue to seed just fine. The link is broken, but the file is untouched. Sharing \u00b6 As you can see I re-used the picture from above, since the only thing that will change is the name of the box you tick. Ignore \u00b6 Check Add ignore Patterns After clicking save, a window will come up asking what we want out patterns to be Advanced \u00b6 Explanation Name Value Reason Watch For Changes Checked This watches for changes without doing an entire folder scan So when new files are added, it doesn't have to wait for the scan to see them Folder Type Send & Receive This is important for deleting the old hardlinks rTorrent creates File Pull Order Oldest First I want the file/folder that was FIRST added to the list to be synced Rather than having files come out of order Ignore Permissions Checked This helps solve the issues with Syncthings weird permissions issue on SCALE Ignore Prompt \u00b6 As of right now I only include /ignore in here. This is in the event I want to add something to my seedbox, but NOT have it sent to my Truenas Scale Syncthing, I will simply save it to the ignore category in rTorrent, and it will be ignored","title":"Folder Setup"},{"location":"applications/syncthing/folder_setup/#local-setup","text":"Click Add Folder","title":"Local Setup"},{"location":"applications/syncthing/folder_setup/#general","text":"Folder Label Name this whatever Folder ID Pre-filled, ignore it Folder Path /syncthing This needs to be the same Mount Point you set during installation","title":"General"},{"location":"applications/syncthing/folder_setup/#sharing","text":"Check the box next to the server you wish to share this folder with, in my case it is Seedbox","title":"Sharing"},{"location":"applications/syncthing/folder_setup/#ignore","text":"Check Add ignore Patterns After clicking save, a window will come up asking what we want out patterns to be","title":"Ignore"},{"location":"applications/syncthing/folder_setup/#advanced","text":"Explanation Name Value Reason Watch For Changes Checked This watches for changes without doing an entire folder scan So when new files are added, it doesn't have to wait for the scan to see them Folder Type Send & Receive This is important for deleting the old hardlinks rTorrent creates File Pull Order Oldest First I want the file/folder that was FIRST added to the list to be synced Rather than having files come out of order Ignore Permissions Checked This helps solve the issues with Syncthings weird permissions issue on SCALE","title":"Advanced"},{"location":"applications/syncthing/folder_setup/#ignore-prompt","text":"As of right now I only include /ignore in here. This is in the event I want to add something to my my Truenas SCALE folder, but have it NOT sent to my Seedbox Syncthing","title":"Ignore Prompt"},{"location":"applications/syncthing/folder_setup/#remote-setup","text":"Now you need to go to your Seedbox Syncthing and accept the new folder, and fill out the same settings","title":"Remote Setup"},{"location":"applications/syncthing/folder_setup/#general_1","text":"Folder Label Name this whatever Folder ID Pre-filled, ignore it Folder Path The folder path is not as easy as it is to get locally.. This needs to be set to your Bittorrent Completed Downloads folder If you plan on using my exact setup, expand the option below rTorrent Save Path I use rTorrent, because it actually supports hard-links, unlike pretty much ANY other torrent client for whatever reason.. We will specifically use the file path listed under Autotools -> Path to finished downloads , because this is where our hardlinks are created. Hard-links are awesome because they create instructions from the completed torrent, to our save location. So theres no need to copy, or move files just to get them to where Syncthing can see them. AND, once the script in the cron job section deletes the file on our Truenas SCALE server, the hard-link is deleted from the Seedbox as well, but the torrents will continue to seed just fine. The link is broken, but the file is untouched.","title":"General"},{"location":"applications/syncthing/folder_setup/#sharing_1","text":"As you can see I re-used the picture from above, since the only thing that will change is the name of the box you tick.","title":"Sharing"},{"location":"applications/syncthing/folder_setup/#ignore_1","text":"Check Add ignore Patterns After clicking save, a window will come up asking what we want out patterns to be","title":"Ignore"},{"location":"applications/syncthing/folder_setup/#advanced_1","text":"Explanation Name Value Reason Watch For Changes Checked This watches for changes without doing an entire folder scan So when new files are added, it doesn't have to wait for the scan to see them Folder Type Send & Receive This is important for deleting the old hardlinks rTorrent creates File Pull Order Oldest First I want the file/folder that was FIRST added to the list to be synced Rather than having files come out of order Ignore Permissions Checked This helps solve the issues with Syncthings weird permissions issue on SCALE","title":"Advanced"},{"location":"applications/syncthing/folder_setup/#ignore-prompt_1","text":"As of right now I only include /ignore in here. This is in the event I want to add something to my seedbox, but NOT have it sent to my Truenas Scale Syncthing, I will simply save it to the ignore category in rTorrent, and it will be ignored","title":"Ignore Prompt"},{"location":"applications/syncthing/in-app/","text":"Settings \u00b6 General \u00b6 Only thing I changed was my Device Name on here, this is unimportant and up to you. GUI \u00b6 Changed my Username/Password Connections \u00b6 I was having issues with Synthing ONLY using a relay connection, which resulted in a super slow download speed from my Seedbox. The solution was to use the following format. If you are still having an issue with relaying, you can try un-ticking the Enable Relaying box, but I didn't, because I still want a fallback option incase for whatever reason my port forwarding fails. Sync Protocol Listen Addresses tcp4://0.0.0.0:54914, tcp4://:54914 Note You should be using whatever port is listed in your Networking Listening Ports","title":"In App Settings"},{"location":"applications/syncthing/in-app/#settings","text":"","title":"Settings"},{"location":"applications/syncthing/in-app/#general","text":"Only thing I changed was my Device Name on here, this is unimportant and up to you.","title":"General"},{"location":"applications/syncthing/in-app/#gui","text":"Changed my Username/Password","title":"GUI"},{"location":"applications/syncthing/in-app/#connections","text":"I was having issues with Synthing ONLY using a relay connection, which resulted in a super slow download speed from my Seedbox. The solution was to use the following format. If you are still having an issue with relaying, you can try un-ticking the Enable Relaying box, but I didn't, because I still want a fallback option incase for whatever reason my port forwarding fails. Sync Protocol Listen Addresses tcp4://0.0.0.0:54914, tcp4://:54914 Note You should be using whatever port is listed in your Networking Listening Ports","title":"Connections"},{"location":"applications/syncthing/installation/","text":"Container \u00b6 For this application I used Syncthing provided by TrueCharts . Available under the stable train Networking \u00b6 WebUI \u00b6 Nothing changed here, this is just the port your app will use for its web service If you are wanting to use ingress, its probably better to use clusterIP instead of Simple Listening Ports \u00b6 These are the ports your other Syncthing service will connect to. You will need to either: If you are using a VPN Port forward this port on whatever VPN service you are using, as I have stated, I am using Mullvad You only need to change the first TWO ports (marked with red), not the last port If you are NOT using a VPN Port forward this port on your router Also, if you are NOT using a VPN you can leave the two ports default, the only reason I changed my port is because Mullvad does not give you the option to choose which port to use Storage \u00b6 Configuration \u00b6 The setup is default Data \u00b6 I always mount to the root directory of the container I also try to use the applications name for the mountpath, since its typically never going to be a file or folder thats already present VPN \u00b6 Using a Wireguard setup Added the kubernetes network, as well as my LAN network to the killswitch Using a VPN for this application is in no way mandatory at all, I just simply felt safer transmitting data encrypted","title":"Installation"},{"location":"applications/syncthing/installation/#container","text":"For this application I used Syncthing provided by TrueCharts . Available under the stable train","title":"Container"},{"location":"applications/syncthing/installation/#networking","text":"","title":"Networking"},{"location":"applications/syncthing/installation/#webui","text":"Nothing changed here, this is just the port your app will use for its web service If you are wanting to use ingress, its probably better to use clusterIP instead of Simple","title":"WebUI"},{"location":"applications/syncthing/installation/#listening-ports","text":"These are the ports your other Syncthing service will connect to. You will need to either: If you are using a VPN Port forward this port on whatever VPN service you are using, as I have stated, I am using Mullvad You only need to change the first TWO ports (marked with red), not the last port If you are NOT using a VPN Port forward this port on your router Also, if you are NOT using a VPN you can leave the two ports default, the only reason I changed my port is because Mullvad does not give you the option to choose which port to use","title":"Listening Ports"},{"location":"applications/syncthing/installation/#storage","text":"","title":"Storage"},{"location":"applications/syncthing/installation/#configuration","text":"The setup is default","title":"Configuration"},{"location":"applications/syncthing/installation/#data","text":"I always mount to the root directory of the container I also try to use the applications name for the mountpath, since its typically never going to be a file or folder thats already present","title":"Data"},{"location":"applications/syncthing/installation/#vpn","text":"Using a Wireguard setup Added the kubernetes network, as well as my LAN network to the killswitch Using a VPN for this application is in no way mandatory at all, I just simply felt safer transmitting data encrypted","title":"VPN"},{"location":"applications/tube-archivist/about/","text":"Purpose \u00b6 I personally use this to: Download Youtube channels, or individual channels. This is easily the best option if you are wanting to data horde Youtube channels Sources \u00b6 Website \u00b6 Important information regarding Syncthing Github \u00b6 Source code for the project, active issues etc. Video \u00b6 This is not a video by me, it is a video by IBRACORP This is also not the installation video I used, it also does NOT include the in-app settings I used, its simply just a good video for displaying its amazing capability and great UI","title":"About"},{"location":"applications/tube-archivist/about/#purpose","text":"I personally use this to: Download Youtube channels, or individual channels. This is easily the best option if you are wanting to data horde Youtube channels","title":"Purpose"},{"location":"applications/tube-archivist/about/#sources","text":"","title":"Sources"},{"location":"applications/tube-archivist/about/#website","text":"Important information regarding Syncthing","title":"Website"},{"location":"applications/tube-archivist/about/#github","text":"Source code for the project, active issues etc.","title":"Github"},{"location":"applications/tube-archivist/about/#video","text":"This is not a video by me, it is a video by IBRACORP This is also not the installation video I used, it also does NOT include the in-app settings I used, its simply just a good video for displaying its amazing capability and great UI","title":"Video"},{"location":"applications/tube-archivist/dataset/","text":"This is the location your videos will be stored, you can skip this step if you are fine with just using PVC instead As you can see I created a dataset in media , since this is media after all. Unfortunately, I could not find a way to run this application without using 777.. But as you can see I left the permissions wide open, and set the user:group to apps Note The apps : apps user:group is built into Truenas SCALE, it is the default user for most applications on Truenas SCALE. You do not have to create a separate user for each application. When configuring your application you'll typically see user:group 568 , this is the UID for apps and its recommended not to change it.","title":"Datasets"},{"location":"applications/tube-archivist/es-installation/","text":"For this application I used the Custom-App provided by TrueCharts . Available under the stable train Container \u00b6 Application Name ta-elastic The name is very important, as it determines our DNS names, which is how we are going to connect the applications together.. You don't HAVE to follow my naming scheme, but if you don't, you'll have to also change your DNS name Container Repository bbilly1/tubearchivist-es Container Tag latest Environment Variables \u00b6 Name xpack.security.enabled Value true Name ELASTIC_PASSWORD Value verysecret Name discovery.type Value single-node Name ES_JAVA_OPTS Value -Xms512m -Xmx512m Networking \u00b6 Target Port 9200 Port 9200 Storage \u00b6 I am using PVC in this case since this is not something the user will need to interact with Ensure the mountpath is: /usr/share/elasticsearch/data Elasticsearch specifically looks to that mount point, its required Security \u00b6 Just run the application as 568 Add a Supplemental Group and input 0","title":"Elasticsearch Installation"},{"location":"applications/tube-archivist/es-installation/#container","text":"Application Name ta-elastic The name is very important, as it determines our DNS names, which is how we are going to connect the applications together.. You don't HAVE to follow my naming scheme, but if you don't, you'll have to also change your DNS name Container Repository bbilly1/tubearchivist-es Container Tag latest","title":"Container"},{"location":"applications/tube-archivist/es-installation/#environment-variables","text":"Name xpack.security.enabled Value true Name ELASTIC_PASSWORD Value verysecret Name discovery.type Value single-node Name ES_JAVA_OPTS Value -Xms512m -Xmx512m","title":"Environment Variables"},{"location":"applications/tube-archivist/es-installation/#networking","text":"Target Port 9200 Port 9200","title":"Networking"},{"location":"applications/tube-archivist/es-installation/#storage","text":"I am using PVC in this case since this is not something the user will need to interact with Ensure the mountpath is: /usr/share/elasticsearch/data Elasticsearch specifically looks to that mount point, its required","title":"Storage"},{"location":"applications/tube-archivist/es-installation/#security","text":"Just run the application as 568 Add a Supplemental Group and input 0","title":"Security"},{"location":"applications/tube-archivist/in-app/","text":"Theres nothing specific to Truenas Scale after setting up your application. I will still however, share my settings. Settings \u00b6 To get to the settings just click the Cog Wheel at the top right Download Format \u00b6 This is completely subjective, and I am also continuously changing this setting until I land on something that I like. However, this is what I am currently using: (bv*[vcodec~='^((he|a)vc|h26[45])']+ba) / (bv*+ba/b) Current metadata embed setting: True Current thumbnail embed setting: True Integrations \u00b6 Integrate with returnyoutubedislike.com to get dislikes and average ratings back: True I like to be able to see dislikes on videos Integrate with SponsorBlock to get sponsored timestamps: True Skips in-video advertisements Current Cast integration: True Ability to chromecast your videos Scheduler Setup \u00b6 Rescan Subscriptions 0 * * Scans subscriptions for new videos every hour Start download 30 * * Downloads new videos picked up by Rescan Subscriptions every hour, on the 30 minute mark","title":"In App Settings"},{"location":"applications/tube-archivist/in-app/#settings","text":"To get to the settings just click the Cog Wheel at the top right","title":"Settings"},{"location":"applications/tube-archivist/in-app/#download-format","text":"This is completely subjective, and I am also continuously changing this setting until I land on something that I like. However, this is what I am currently using: (bv*[vcodec~='^((he|a)vc|h26[45])']+ba) / (bv*+ba/b) Current metadata embed setting: True Current thumbnail embed setting: True","title":"Download Format"},{"location":"applications/tube-archivist/in-app/#integrations","text":"Integrate with returnyoutubedislike.com to get dislikes and average ratings back: True I like to be able to see dislikes on videos Integrate with SponsorBlock to get sponsored timestamps: True Skips in-video advertisements Current Cast integration: True Ability to chromecast your videos","title":"Integrations"},{"location":"applications/tube-archivist/in-app/#scheduler-setup","text":"Rescan Subscriptions 0 * * Scans subscriptions for new videos every hour Start download 30 * * Downloads new videos picked up by Rescan Subscriptions every hour, on the 30 minute mark","title":"Scheduler Setup"},{"location":"applications/tube-archivist/redis-installation/","text":"For this application I used the Custom-App provided by TrueCharts . Available under the stable train Container \u00b6 Application Name ta-redis The name is very important, as it determines our DNS names, which is how we are going to connect the applications together.. You don't HAVE to follow my naming scheme, but if you don't, you'll have to also change your DNS name Container Repository redislabs/rejson Container Tag latest Networking \u00b6 Target Port 6379 Port 6379 Storage \u00b6 I am using PVC in this case since this is not something the user will need to interact with Ensure the mountpath is: /data Redis specifically looks to that mount point, its required Security \u00b6 This application runs fine with default permissions","title":"Redis Installation"},{"location":"applications/tube-archivist/redis-installation/#container","text":"Application Name ta-redis The name is very important, as it determines our DNS names, which is how we are going to connect the applications together.. You don't HAVE to follow my naming scheme, but if you don't, you'll have to also change your DNS name Container Repository redislabs/rejson Container Tag latest","title":"Container"},{"location":"applications/tube-archivist/redis-installation/#networking","text":"Target Port 6379 Port 6379","title":"Networking"},{"location":"applications/tube-archivist/redis-installation/#storage","text":"I am using PVC in this case since this is not something the user will need to interact with Ensure the mountpath is: /data Redis specifically looks to that mount point, its required","title":"Storage"},{"location":"applications/tube-archivist/redis-installation/#security","text":"This application runs fine with default permissions","title":"Security"},{"location":"applications/tube-archivist/tube-installation/","text":"For this application I used the Custom-App provided by TrueCharts . Available under the stable train Container \u00b6 Container Repository bbilly1/tubearchivist Container Tag latest Environment Variables \u00b6 Name ES_URL Value http://ta-elastic-custom-app.ix-ta-elastic.svc.cluster.local:9200 Name REDIS_HOST Value ta-redis-custom-app.ix-ta-redis.svc.cluster.local Name TA_USERNAME Value USERNAME Name TA_PASSWORD Value PASSWORD Name ELASTIC_PASSWORD Value verysecret Name TA_HOST Value youtube.myserver.com If you are NOT using a reverse proxy, put your IP address here instead Networking \u00b6 Ports \u00b6 Target Port 8000 Port 8000 DNS \u00b6 A change is required here, otherwise sometimes the application will start and will be unable to find the redis and elastic search containers by DNS name dnsPolicy ClusterFirst Storage \u00b6 Used the same dataset we created earlier This is where your data, or videos are going to be actually stored You could instead use PVC if you would like to, but since my applications are not on the same pool as my storage tank, it would be a bad idea for me personally Ensure the mountpath is: /youtube TubeArchivist specifically looks to that mount point, its required Used pvc just for the cache, its likely to just be small files the user will never have to interact with anyway Ensure the mountpath is: /cache Security \u00b6 Running the application without user:group 0 or root , resulted in a Django import error.","title":"TubeArchivist Installation"},{"location":"applications/tube-archivist/tube-installation/#container","text":"Container Repository bbilly1/tubearchivist Container Tag latest","title":"Container"},{"location":"applications/tube-archivist/tube-installation/#environment-variables","text":"Name ES_URL Value http://ta-elastic-custom-app.ix-ta-elastic.svc.cluster.local:9200 Name REDIS_HOST Value ta-redis-custom-app.ix-ta-redis.svc.cluster.local Name TA_USERNAME Value USERNAME Name TA_PASSWORD Value PASSWORD Name ELASTIC_PASSWORD Value verysecret Name TA_HOST Value youtube.myserver.com If you are NOT using a reverse proxy, put your IP address here instead","title":"Environment Variables"},{"location":"applications/tube-archivist/tube-installation/#networking","text":"","title":"Networking"},{"location":"applications/tube-archivist/tube-installation/#ports","text":"Target Port 8000 Port 8000","title":"Ports"},{"location":"applications/tube-archivist/tube-installation/#dns","text":"A change is required here, otherwise sometimes the application will start and will be unable to find the redis and elastic search containers by DNS name dnsPolicy ClusterFirst","title":"DNS"},{"location":"applications/tube-archivist/tube-installation/#storage","text":"Used the same dataset we created earlier This is where your data, or videos are going to be actually stored You could instead use PVC if you would like to, but since my applications are not on the same pool as my storage tank, it would be a bad idea for me personally Ensure the mountpath is: /youtube TubeArchivist specifically looks to that mount point, its required Used pvc just for the cache, its likely to just be small files the user will never have to interact with anyway Ensure the mountpath is: /cache","title":"Storage"},{"location":"applications/tube-archivist/tube-installation/#security","text":"Running the application without user:group 0 or root , resulted in a Django import error.","title":"Security"},{"location":"general_guides/about/","text":"Welcome to the General section \u00b6 In this section, there will be general guides for Truenas Scale, covering stuff not specifically related to applications Make sure to use the tabs on the left hand side to find a guide you are interested in","title":"About"},{"location":"general_guides/about/#welcome-to-the-general-section","text":"In this section, there will be general guides for Truenas Scale, covering stuff not specifically related to applications Make sure to use the tabs on the left hand side to find a guide you are interested in","title":"Welcome to the General section"},{"location":"general_guides/folder_structure/","text":"Folder Structure \u00b6 This guide is purely my opinion and what works and makes things easier for me, if you would like to have a folder called Media For Plex UltimaTE xx Edition thats totally up to you. General Guide for Folder Layouts \u00b6 Things to avoid Spaces in folder names Otherwise you will have to deal with escaping spaces in file paths and annoying stuff like that Capitalization Personal preference, I like to keep all of my files lowercase and uniform That wa you don't have to remember whether or not the file or folder is lowercase or not its just simply always lowercase Linux is CaSe SeNsIsTiVe after all, so you HAVE to remember Any sort of special character besides \"_\" or \"-\" Media Folders \u00b6 Spread out your media folder in a way plex can understand Such as separating series , movies and music VPN Folders \u00b6 Separate OpenVPN files from Wireguard Download Folders \u00b6 Separate all download clients into their own dataset","title":"Folder Structure"},{"location":"general_guides/folder_structure/#folder-structure","text":"This guide is purely my opinion and what works and makes things easier for me, if you would like to have a folder called Media For Plex UltimaTE xx Edition thats totally up to you.","title":"Folder Structure"},{"location":"general_guides/folder_structure/#general-guide-for-folder-layouts","text":"Things to avoid Spaces in folder names Otherwise you will have to deal with escaping spaces in file paths and annoying stuff like that Capitalization Personal preference, I like to keep all of my files lowercase and uniform That wa you don't have to remember whether or not the file or folder is lowercase or not its just simply always lowercase Linux is CaSe SeNsIsTiVe after all, so you HAVE to remember Any sort of special character besides \"_\" or \"-\"","title":"General Guide for Folder Layouts"},{"location":"general_guides/folder_structure/#media-folders","text":"Spread out your media folder in a way plex can understand Such as separating series , movies and music","title":"Media Folders"},{"location":"general_guides/folder_structure/#vpn-folders","text":"Separate OpenVPN files from Wireguard","title":"VPN Folders"},{"location":"general_guides/folder_structure/#download-folders","text":"Separate all download clients into their own dataset","title":"Download Folders"},{"location":"general_guides/storage_permissions/","text":"Application Dataset Permissions \u00b6 This is, and probably always will be a hot topic for Truenas SCALE Hopefully this guide will help clear up a few issues. User:Group \u00b6 Pretty much every application runs as apps : apps ( user : group ) Theres a single application that I don't change to apps and simply just use one of the permissions listed below, and that application is syncthing . SMB User Access \u00b6 This issue is solved simply by adding your SMB user to your apps group. That way, and dataset apps has access to, so will your SMB user. Truenas Scale GUI Credentials Local Users Click on your user Click edit Click dropdown menu for auxiliary groups Select apps Ensure Samba Authentication is ticked Save It should look like this once you're done: Start Off Open \u00b6 I know, but the idea is to start off open, see if the application will run with no issues, then start closing off permissions. Example of an open Dataset: After Testing \u00b6 After making sure the example above works, I switch to something like this: The other group/user no longer has access to the files, which is what we obviously want to aim for This is what most of my applications will run with","title":"Application Dataset Permissions"},{"location":"general_guides/storage_permissions/#application-dataset-permissions","text":"This is, and probably always will be a hot topic for Truenas SCALE Hopefully this guide will help clear up a few issues.","title":"Application Dataset Permissions"},{"location":"general_guides/storage_permissions/#usergroup","text":"Pretty much every application runs as apps : apps ( user : group ) Theres a single application that I don't change to apps and simply just use one of the permissions listed below, and that application is syncthing .","title":"User:Group"},{"location":"general_guides/storage_permissions/#smb-user-access","text":"This issue is solved simply by adding your SMB user to your apps group. That way, and dataset apps has access to, so will your SMB user. Truenas Scale GUI Credentials Local Users Click on your user Click edit Click dropdown menu for auxiliary groups Select apps Ensure Samba Authentication is ticked Save It should look like this once you're done:","title":"SMB User Access"},{"location":"general_guides/storage_permissions/#start-off-open","text":"I know, but the idea is to start off open, see if the application will run with no issues, then start closing off permissions. Example of an open Dataset:","title":"Start Off Open"},{"location":"general_guides/storage_permissions/#after-testing","text":"After making sure the example above works, I switch to something like this: The other group/user no longer has access to the files, which is what we obviously want to aim for This is what most of my applications will run with","title":"After Testing"},{"location":"scripts/about/","text":"Welcome to Scripts \u00b6 This contains a list of scripts that I personally use with my applications","title":"About"},{"location":"scripts/about/#welcome-to-scripts","text":"This contains a list of scripts that I personally use with my applications","title":"Welcome to Scripts"},{"location":"scripts/cmd_to_container/","text":"Command to Container \u00b6 Purpose \u00b6 This can be set on a cron job, or just on a one-off thing even. All it does is sends a command to the container #!/bin/bash # Application Name Here: app_name = 'nextcloud' # Container Name Here: container = 'hpb' # You may not need this, if that is the case, comment it out, Then delete the `--container \"$container\"` in the last line below, chances are you don't need it. # Command to Container/Pod here: command = 'php occ files:scan --all' # Note: if the command has single quotes in it, you will have # to switch to double quotes and escape all the special characters between the double quotes # More info here: https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_03.html #ignored dependency pods, No change required ignore = \"mariadb|redis|postgres|memcached|cron|coredns|nvidia|openebs\" namespace = $( k3s kubectl get namespaces | awk '{print $1}' | grep -i ^ix- \" $app_name \" $ || echo \"Are you sure, you used the right app name?\" ) pod = $( k3s kubectl get -n \" $namespace \" pods | awk '{print $1}' | grep ^ \" $app_name \" | grep -Ev \" $ignore \" ) k3s kubectl exec -n \" $namespace \" --stdin --tty \" $pod \" --container \" $container \" -- $command This specific example will send the command php occ files:scan --all to Nextcloud's hpb container (which will then re-scan all of the files, adding them to the WEB-GUI if they are not already there) Nextcloud REQUIRES that you specify the hpb container to run this command however Usually you don't need to specify the container, so you can delete container='hpb and --container \"$container\" if you do not need them.. If you don't know if you need them.. you likely don't need them","title":"Command to Container"},{"location":"scripts/cmd_to_container/#command-to-container","text":"","title":"Command to Container"},{"location":"scripts/cmd_to_container/#purpose","text":"This can be set on a cron job, or just on a one-off thing even. All it does is sends a command to the container #!/bin/bash # Application Name Here: app_name = 'nextcloud' # Container Name Here: container = 'hpb' # You may not need this, if that is the case, comment it out, Then delete the `--container \"$container\"` in the last line below, chances are you don't need it. # Command to Container/Pod here: command = 'php occ files:scan --all' # Note: if the command has single quotes in it, you will have # to switch to double quotes and escape all the special characters between the double quotes # More info here: https://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_03.html #ignored dependency pods, No change required ignore = \"mariadb|redis|postgres|memcached|cron|coredns|nvidia|openebs\" namespace = $( k3s kubectl get namespaces | awk '{print $1}' | grep -i ^ix- \" $app_name \" $ || echo \"Are you sure, you used the right app name?\" ) pod = $( k3s kubectl get -n \" $namespace \" pods | awk '{print $1}' | grep ^ \" $app_name \" | grep -Ev \" $ignore \" ) k3s kubectl exec -n \" $namespace \" --stdin --tty \" $pod \" --container \" $container \" -- $command This specific example will send the command php occ files:scan --all to Nextcloud's hpb container (which will then re-scan all of the files, adding them to the WEB-GUI if they are not already there) Nextcloud REQUIRES that you specify the hpb container to run this command however Usually you don't need to specify the container, so you can delete container='hpb and --container \"$container\" if you do not need them.. If you don't know if you need them.. you likely don't need them","title":"Purpose"},{"location":"scripts/heavyscript/Update_Applications/","text":"Flag Table \u00b6 Flag Example Parameter Description -U -U -U 5 None or Integer Update applications, ignoring major version changes Optionally, you can supply a number after the argument to update multiple applications at once -u -u -u 5 None or Integer Update applications, do NOT update if there was a major version change Optionally, you can supply a number after the argument to update multiple applications at once -b -b 14 Integer Backup ix-appliactions dataset Creates backups up to the number you've chosen -i -i nextcloud -i sonarr String Applications listed will be ignored during updating List one application after another as shown in the example -r -r None Monitors applications after they update If the app does not become \"ACTIVE\" after either: The custom Timeout, or Default Timeout, rollback the application. -v -v None Verbose Output Look at the bottom of this page for an example -S -S None Shutdown the application prior to updating it -t -t 150 Integer Set a custom timeout to be used with either: -m Time the script will wait for application to be \"STOPPED\" or -(u\\|U) Time the script will wait for application to be either \"STOPPED\" or \"ACTIVE\" -s -s None Sync Catalogs prior to updating -p -p None Prune old/unused docker images Further Explanation \u00b6 Update Options \u00b6 There are two options for updating -U This option does not care about major version changes, and will update even if there is one A major version change example: 3.14.2 ---> 4.14.2 -u This option will NOT update if there was a major version change 3.14.2 ---> 4.14.2 In this case, this application would NOT update, this is useful because a lot of the time, major version changes include breaking changes Asynchronous Updates \u00b6 Both of the update options have the ability to update multiple applications at one time You can do this by placing a number after the -u or -U Example: -U 5 or -u 5 This will keep up to 5 applications updating at one time You can place any whole number after the flag, except for 0 If you wish to NOT have multiple applications updating at once, simply use: -u 1 or -u If you do not place a number after -u , it will default to 1 Backing Up \u00b6 This does NOT backup individual applications (this is already taken care of when updating your app, a snapshot is taken, this is what allows you to rollback applications) Instead, the script will back up your entire ix-applications dataset I will talk more about why this is useful in another section You can backup your dataset prior to updating by: -b 14 You can use any whole number after -b besides 0 The number you choose is the MAXIMUM number of HeavyScript backups that will be on your system It is important to not have this number be so high, if you have too many backups your system will slow down Any number of backups that EXCEEDS the number you choose will be deleted If you started with 18 backups, and run -b 14 , the 5 oldest backups will be deleted, because they exceed 14 Ignoring \u00b6 If you have an application that seems to break after every update, add it to the ignore list Adding an application to the ignore list will completely ignore it when it comes to updating, neither -u or -U will update that application Just make sure you spell it right, capitalization does not matter however. Ignored applications MUST be added one by one Example: -i sonarr -i radarr -i nextcloud As you can see I am spacing out each -i away from each other Using something like -i sonarr radarr nextcloud will NOT work, each app needs its own flag Note: The name you type after -i is the exact name YOU gave the application when creating it Rolling Back \u00b6 This is by far one of my favorite features, especially since a lot of the updates that have been pushed lately seem to fail, this has saved me a ton of time -r Will rollback an application to its previous version if it does not become active after your timeout Example: Nextcloud is going from 3.1.14 to 3.1.15 , it fails to come back up for whatever reason, it will be rolled back to 3.1.14 Verbose \u00b6 Sounds just as it is, it will produce more of an output when updating apps Shutdown Before Update \u00b6 This will shutdown the individual application before it sends it the update command Some people think this is a safer way to update applications, so I have it as an option, I personally don't use it -S Example: Jackett has an update, it is active , before updating Jackett the script will send it the shutdown command and wait for it to be fully stopped before continuing with the update Timeout \u00b6 This is used in two places in the script How long HeavyScript waits for the application to be Active before rolling it back If you are using -r anyway How long HeavyScript waits for the application to Shutdown before it times out Example: -t 400 Must use a whole number The number is in seconds If unset, the script uses 500 by default Sync \u00b6 This just syncs the catalog prior to updating Syncing the catalog will ensure the latest application versions are being pulled down from the repository Prune \u00b6 Prunes Old/Unused docker images If this is not done regularly, you can waste a lot of space with old images","title":"Update Applications"},{"location":"scripts/heavyscript/Update_Applications/#flag-table","text":"Flag Example Parameter Description -U -U -U 5 None or Integer Update applications, ignoring major version changes Optionally, you can supply a number after the argument to update multiple applications at once -u -u -u 5 None or Integer Update applications, do NOT update if there was a major version change Optionally, you can supply a number after the argument to update multiple applications at once -b -b 14 Integer Backup ix-appliactions dataset Creates backups up to the number you've chosen -i -i nextcloud -i sonarr String Applications listed will be ignored during updating List one application after another as shown in the example -r -r None Monitors applications after they update If the app does not become \"ACTIVE\" after either: The custom Timeout, or Default Timeout, rollback the application. -v -v None Verbose Output Look at the bottom of this page for an example -S -S None Shutdown the application prior to updating it -t -t 150 Integer Set a custom timeout to be used with either: -m Time the script will wait for application to be \"STOPPED\" or -(u\\|U) Time the script will wait for application to be either \"STOPPED\" or \"ACTIVE\" -s -s None Sync Catalogs prior to updating -p -p None Prune old/unused docker images","title":"Flag Table"},{"location":"scripts/heavyscript/Update_Applications/#further-explanation","text":"","title":"Further Explanation"},{"location":"scripts/heavyscript/Update_Applications/#update-options","text":"There are two options for updating -U This option does not care about major version changes, and will update even if there is one A major version change example: 3.14.2 ---> 4.14.2 -u This option will NOT update if there was a major version change 3.14.2 ---> 4.14.2 In this case, this application would NOT update, this is useful because a lot of the time, major version changes include breaking changes","title":"Update Options"},{"location":"scripts/heavyscript/Update_Applications/#asynchronous-updates","text":"Both of the update options have the ability to update multiple applications at one time You can do this by placing a number after the -u or -U Example: -U 5 or -u 5 This will keep up to 5 applications updating at one time You can place any whole number after the flag, except for 0 If you wish to NOT have multiple applications updating at once, simply use: -u 1 or -u If you do not place a number after -u , it will default to 1","title":"Asynchronous Updates"},{"location":"scripts/heavyscript/Update_Applications/#backing-up","text":"This does NOT backup individual applications (this is already taken care of when updating your app, a snapshot is taken, this is what allows you to rollback applications) Instead, the script will back up your entire ix-applications dataset I will talk more about why this is useful in another section You can backup your dataset prior to updating by: -b 14 You can use any whole number after -b besides 0 The number you choose is the MAXIMUM number of HeavyScript backups that will be on your system It is important to not have this number be so high, if you have too many backups your system will slow down Any number of backups that EXCEEDS the number you choose will be deleted If you started with 18 backups, and run -b 14 , the 5 oldest backups will be deleted, because they exceed 14","title":"Backing Up"},{"location":"scripts/heavyscript/Update_Applications/#ignoring","text":"If you have an application that seems to break after every update, add it to the ignore list Adding an application to the ignore list will completely ignore it when it comes to updating, neither -u or -U will update that application Just make sure you spell it right, capitalization does not matter however. Ignored applications MUST be added one by one Example: -i sonarr -i radarr -i nextcloud As you can see I am spacing out each -i away from each other Using something like -i sonarr radarr nextcloud will NOT work, each app needs its own flag Note: The name you type after -i is the exact name YOU gave the application when creating it","title":"Ignoring"},{"location":"scripts/heavyscript/Update_Applications/#rolling-back","text":"This is by far one of my favorite features, especially since a lot of the updates that have been pushed lately seem to fail, this has saved me a ton of time -r Will rollback an application to its previous version if it does not become active after your timeout Example: Nextcloud is going from 3.1.14 to 3.1.15 , it fails to come back up for whatever reason, it will be rolled back to 3.1.14","title":"Rolling Back"},{"location":"scripts/heavyscript/Update_Applications/#verbose","text":"Sounds just as it is, it will produce more of an output when updating apps","title":"Verbose"},{"location":"scripts/heavyscript/Update_Applications/#shutdown-before-update","text":"This will shutdown the individual application before it sends it the update command Some people think this is a safer way to update applications, so I have it as an option, I personally don't use it -S Example: Jackett has an update, it is active , before updating Jackett the script will send it the shutdown command and wait for it to be fully stopped before continuing with the update","title":"Shutdown Before Update"},{"location":"scripts/heavyscript/Update_Applications/#timeout","text":"This is used in two places in the script How long HeavyScript waits for the application to be Active before rolling it back If you are using -r anyway How long HeavyScript waits for the application to Shutdown before it times out Example: -t 400 Must use a whole number The number is in seconds If unset, the script uses 500 by default","title":"Timeout"},{"location":"scripts/heavyscript/Update_Applications/#sync","text":"This just syncs the catalog prior to updating Syncing the catalog will ensure the latest application versions are being pulled down from the repository","title":"Sync"},{"location":"scripts/heavyscript/Update_Applications/#prune","text":"Prunes Old/Unused docker images If this is not done regularly, you can waste a lot of space with old images","title":"Prune"},{"location":"scripts/heavyscript/about/","text":"HeavyScript \u00b6 HeavyScript is a script created by me, with the idea of being modular, it includes many options and cool features. Why This Script? \u00b6 Some other scripts are derived from this one, a lot of my logic, a lot of my regex etc. So I do not see the point in using someone elses script when you can get the latest and greatest straight from the source However, it would be unfair to say that I came up with this all on my own, I did not, some of the ideas were taken from other projects, I just would like to think I implemented them better, but I guess thats up to you to decide Focuses \u00b6 Stability Everything is tested first on my Virtual Machine(running nightlies), then tested on my main server, and then finally after a while it is pushed to main, for everyone. Modularity It is your machine, I wont force you to do any option you might not want to Self script updates are optional, Rolling back applications is optional, etc Source Code \u00b6 The source code is, and always will be free and open source Github Link","title":"About"},{"location":"scripts/heavyscript/about/#heavyscript","text":"HeavyScript is a script created by me, with the idea of being modular, it includes many options and cool features.","title":"HeavyScript"},{"location":"scripts/heavyscript/about/#why-this-script","text":"Some other scripts are derived from this one, a lot of my logic, a lot of my regex etc. So I do not see the point in using someone elses script when you can get the latest and greatest straight from the source However, it would be unfair to say that I came up with this all on my own, I did not, some of the ideas were taken from other projects, I just would like to think I implemented them better, but I guess thats up to you to decide","title":"Why This Script?"},{"location":"scripts/heavyscript/about/#focuses","text":"Stability Everything is tested first on my Virtual Machine(running nightlies), then tested on my main server, and then finally after a while it is pushed to main, for everyone. Modularity It is your machine, I wont force you to do any option you might not want to Self script updates are optional, Rolling back applications is optional, etc","title":"Focuses"},{"location":"scripts/heavyscript/about/#source-code","text":"The source code is, and always will be free and open source Github Link","title":"Source Code"},{"location":"scripts/heavyscript/utilities/","text":"The Menu \u00b6 The menu is a nice shortcut to any HeavyScript utilities you could need You can access the menu simply by running bash heavyscript.sh or bash /path/to/script/heavyscript.sh All of the options do just what you would expect Opens the help menu, so you can see all of the options for the script Lists all of your internal DNS names and their ports Opens the Mount and Unmount feature, so you can mount your volumes Creates a ix-applications backup Opens the menu to restore your ix-applications dataset to a previous version Opens the menu to delete an ix-applications backup Updates HeavyScript to the latest github version Opens a menu to create, then run a HeavyScript update Listing DNS Names \u00b6 This is useful for when you cannot figure out the internal DNS, and port that you need to use when linking applications together This is what it looks like, as you can see it shows the DNS name, followed by the port Get to this by either using bash heavy_script.sh --dns or by using the menu bash heavy_script.sh Mounting PVC \u00b6 Finally, an easy to use mounting feature, so you don't have to do that long process yourself If you don't know, lots of applications use containerized storage, which is unaccessible from your filesystem on your server UNTIL you mount the containers volume. The way to do that manually is long, and a pain, so I created a function within HeavyScript to do it all for you The first menu appears like this: If you choose 1 , it will list all of your applications, and their volumes as shown below If you choose 2 , it will unmount ALL of the volumes that were mounted with the script And the second menu: Type the number associated with the volume you wish to mount, it will: Shutdown that application Mount it under /mnt/heavyscript/ To unmount, simply open the menu again and choose option 2 to unmount everything You NEED to do this before attempting to start the application Get to this by either using bash heavy_script.sh --mount or by using the menu bash heavy_script.sh Restoring Backup \u00b6 This is useful for when you absolutely destroyed all of your applications, or messed up your kubernetes cluster Lists out each backup from newest to oldest After selecting a backup by typing the number to the left of it and pressing enter, HeavyScript will prompt you to confirm your decision before actually restoring that backup This process takes a long time, so just be patient Get to this by either using bash heavy_script.sh --restore or by using the menu bash heavy_script.sh Deleting Backup \u00b6 This is useful for when you need to delete backups one by one, from other scripts, or if you simply just have too many backups Lists out each backup from newest to oldest After selecting a backup by typing the number to the left of it and pressing enter, HeavyScript will prompt you to confirm your decision before actually deleting that backup Get to this by either using bash heavy_script.sh --delete-backup or by using the menu bash heavy_script.sh Updating Applications \u00b6 This is something I am very proud of, it allows you to create a bash heavy_script.sh update with interactive options The first Menu: Type the number associated with the option you want It will then ask how many applications you would like to update at once Type a number greater than 0 Finally, you can make your selections After you make a selection, it will appear under Current Choices After you finish up, you can type 00 and the update with your options will begin! Get to this by Using the menu bash heavy_script.sh","title":"Utilities"},{"location":"scripts/heavyscript/utilities/#the-menu","text":"The menu is a nice shortcut to any HeavyScript utilities you could need You can access the menu simply by running bash heavyscript.sh or bash /path/to/script/heavyscript.sh All of the options do just what you would expect Opens the help menu, so you can see all of the options for the script Lists all of your internal DNS names and their ports Opens the Mount and Unmount feature, so you can mount your volumes Creates a ix-applications backup Opens the menu to restore your ix-applications dataset to a previous version Opens the menu to delete an ix-applications backup Updates HeavyScript to the latest github version Opens a menu to create, then run a HeavyScript update","title":"The Menu"},{"location":"scripts/heavyscript/utilities/#listing-dns-names","text":"This is useful for when you cannot figure out the internal DNS, and port that you need to use when linking applications together This is what it looks like, as you can see it shows the DNS name, followed by the port Get to this by either using bash heavy_script.sh --dns or by using the menu bash heavy_script.sh","title":"Listing DNS Names"},{"location":"scripts/heavyscript/utilities/#mounting-pvc","text":"Finally, an easy to use mounting feature, so you don't have to do that long process yourself If you don't know, lots of applications use containerized storage, which is unaccessible from your filesystem on your server UNTIL you mount the containers volume. The way to do that manually is long, and a pain, so I created a function within HeavyScript to do it all for you The first menu appears like this: If you choose 1 , it will list all of your applications, and their volumes as shown below If you choose 2 , it will unmount ALL of the volumes that were mounted with the script And the second menu: Type the number associated with the volume you wish to mount, it will: Shutdown that application Mount it under /mnt/heavyscript/ To unmount, simply open the menu again and choose option 2 to unmount everything You NEED to do this before attempting to start the application Get to this by either using bash heavy_script.sh --mount or by using the menu bash heavy_script.sh","title":"Mounting PVC"},{"location":"scripts/heavyscript/utilities/#restoring-backup","text":"This is useful for when you absolutely destroyed all of your applications, or messed up your kubernetes cluster Lists out each backup from newest to oldest After selecting a backup by typing the number to the left of it and pressing enter, HeavyScript will prompt you to confirm your decision before actually restoring that backup This process takes a long time, so just be patient Get to this by either using bash heavy_script.sh --restore or by using the menu bash heavy_script.sh","title":"Restoring Backup"},{"location":"scripts/heavyscript/utilities/#deleting-backup","text":"This is useful for when you need to delete backups one by one, from other scripts, or if you simply just have too many backups Lists out each backup from newest to oldest After selecting a backup by typing the number to the left of it and pressing enter, HeavyScript will prompt you to confirm your decision before actually deleting that backup Get to this by either using bash heavy_script.sh --delete-backup or by using the menu bash heavy_script.sh","title":"Deleting Backup"},{"location":"scripts/heavyscript/utilities/#updating-applications","text":"This is something I am very proud of, it allows you to create a bash heavy_script.sh update with interactive options The first Menu: Type the number associated with the option you want It will then ask how many applications you would like to update at once Type a number greater than 0 Finally, you can make your selections After you make a selection, it will appear under Current Choices After you finish up, you can type 00 and the update with your options will begin! Get to this by Using the menu bash heavy_script.sh","title":"Updating Applications"},{"location":"seedbox/about/","text":"This will just go over my seedbox applications and possibly some other things in the future","title":"About"},{"location":"seedbox/rTorrent/about/","text":"rTorrent vs ruTorrent \u00b6 rTorrent is a command line bittorrent client ruTorrent is a web interface for rTorrent For now on I will simply be referring to them as one, under the name of just rTorrent for simplicity Why I use rTorrent \u00b6 Unless you can download qBit Manage for qBittorrent (which in many cases you cant) rTorrent is simply the best seedbox bittorrent client, heres why: Supports hard links Why this is important Instead of copying or moving a file, Hard links allow us to create a \"link\" back to the original folder. Which is useful because we don't want to constantly be moving or even worse, copying files each time they finish just so Syncthing can see them. Instead, we'll create a VERY lightweight hard link, that point back to the original folder. So once files are finished downloading, they will create this lightweight hard link in the folder syncthing can see, so then it can start sending the linked files back to our Truenas SCALE server. After Sonarr/Radarr import those files, and the cron job we created in the syncthing section has ran, the link will be broken. Which is fine, because the torrent files will still be seeding, and the media will now be on our Plex server. Per-Tracker ratio rules Why this is important Some trackers are ratioless, (meaning they do not require you seed to a given ratio before you are free to stop seeding) And some are ratio based, (meaning you have to seed the torrent to a certain percentage or value for you to be free to stop seeding) Well, if you're using ANY other Bittorent client, you dont have the option to set certain trackers to seed to a certain ratio, or to a certain time. If your bittorrent client pre-maturely deletes or stops a torrent file before that trackers requirements are met, then it could land you in trouble with that private tracker, and possibly get you kicked from a site.","title":"About"},{"location":"seedbox/rTorrent/about/#rtorrent-vs-rutorrent","text":"rTorrent is a command line bittorrent client ruTorrent is a web interface for rTorrent For now on I will simply be referring to them as one, under the name of just rTorrent for simplicity","title":"rTorrent vs ruTorrent"},{"location":"seedbox/rTorrent/about/#why-i-use-rtorrent","text":"Unless you can download qBit Manage for qBittorrent (which in many cases you cant) rTorrent is simply the best seedbox bittorrent client, heres why: Supports hard links Why this is important Instead of copying or moving a file, Hard links allow us to create a \"link\" back to the original folder. Which is useful because we don't want to constantly be moving or even worse, copying files each time they finish just so Syncthing can see them. Instead, we'll create a VERY lightweight hard link, that point back to the original folder. So once files are finished downloading, they will create this lightweight hard link in the folder syncthing can see, so then it can start sending the linked files back to our Truenas SCALE server. After Sonarr/Radarr import those files, and the cron job we created in the syncthing section has ran, the link will be broken. Which is fine, because the torrent files will still be seeding, and the media will now be on our Plex server. Per-Tracker ratio rules Why this is important Some trackers are ratioless, (meaning they do not require you seed to a given ratio before you are free to stop seeding) And some are ratio based, (meaning you have to seed the torrent to a certain percentage or value for you to be free to stop seeding) Well, if you're using ANY other Bittorent client, you dont have the option to set certain trackers to seed to a certain ratio, or to a certain time. If your bittorrent client pre-maturely deletes or stops a torrent file before that trackers requirements are met, then it could land you in trouble with that private tracker, and possibly get you kicked from a site.","title":"Why I use rTorrent"},{"location":"seedbox/rTorrent/in-app/","text":"In progress","title":"In app"},{"location":"seedbox/rTorrent/requirements/","text":"Plugins \u00b6 rTorrent does require a couple of plugins to see the same results as I You will need to lookup a guide on how to add plugins for your specific provider. I use Ultracc personally. If you use seedit4.me you will already have these installed by default. ExtRatio \u00b6 This extends the functionality of the ratio feature Github Throttle \u00b6 Throttle is a dependency of ExtRatio Github","title":"Requirements"},{"location":"seedbox/rTorrent/requirements/#plugins","text":"rTorrent does require a couple of plugins to see the same results as I You will need to lookup a guide on how to add plugins for your specific provider. I use Ultracc personally. If you use seedit4.me you will already have these installed by default.","title":"Plugins"},{"location":"seedbox/rTorrent/requirements/#extratio","text":"This extends the functionality of the ratio feature Github","title":"ExtRatio"},{"location":"seedbox/rTorrent/requirements/#throttle","text":"Throttle is a dependency of ExtRatio Github","title":"Throttle"},{"location":"seedbox/rTorrent/rtorrnetrc/","text":"Configuration \u00b6 I will only be covering the most important stuff in this section.. but you can still expand my whole config file below. Name Value Reason network.port_range.set 62000-62000 This is not mandatory. But I wanted to set a static port because I have Uptime Kuma consistently pinging this port to see if rTorrent is up. In the event rTorrent crashes, Uptime Kuma will notify me. network.port_random.set no Same reason as above directory.default.set /home/USERNAME/downloads/rtorrent/seeding This is the folder I want my files to be moved to once completed Note: This is NOT the Hard Link location we will be setting later. So you need to ensure those two locations are different. Also note number of peers - global slots per torrent connection maximums, in progress per torrent connection maximums, seeding per torrent active downloads/uploads I changed the values under those catagories to be huge. You may need to set yours lower. But since my box is ONLY seeding torrents, I wanted to make sure it was doing just that. rtorrent.rc ################################################# ## These settings are mostly user customizable ## ################################################# ## These control where rTorrent looks for .torrents and where files are saved directory.default.set = /home/USERNAME/downloads/rtorrent/seeding schedule2 = watch_directory,5,5,load.start=~/watch/rtorrent/*.torrent #schedule2 = untied_directory,5,5,close_untied= # If there's less than 256MB of disk space, it will stop torrents from # downloading. Keep in mind that we receive alerts about low disk space, so # it shouldn't actually get this low. However, if the server runs out of space, # all of the rTorrents will lock up, eating all of the CPU and spiking loads. schedule2 = low_diskspace,5,60,close_low_diskspace=5120M trackers.use_udp.set = yes # Upload/download rate in KB/s. 0 for unlimited throttle.global_down.max_rate.set_kb = 0 throttle.global_up.max_rate.set_kb = 0 # number of peers - global slots throttle.max_downloads.global.set = 150 throttle.max_uploads.global.set = 5000 # per torrent connection maximums, in progress throttle.min_peers.normal.set = 5000 throttle.max_peers.normal.set = 5000 # per torrent connection maximums, seeding throttle.min_peers.seed.set = 5000 throttle.max_peers.seed.set = 5000 # per torrent active downloads/uploads throttle.max_uploads.set = 5000 throttle.max_downloads.set = 5000 ################################################# ## These settings shouldn't need to be changed ## ################################################# network.scgi.open_local = ~/.config/rtorrent/socket session.path.set = ~/.config/rtorrent/session encoding.add = UTF-8 network.port_range.set = 62000-62000 network.port_random.set = no network.http.dns_cache_timeout.set = 0 ##network.http.ssl_verify_peer.set = 0 ##network.http.ssl_verify_host.set = 0 protocol.encryption.set = allow_incoming,enable_retry,try_outgoing # This chmods the downloaded files to 770. This will allow them to be deleted # by w/ruTorrent, while not allowing any other users to touch them. system.umask.set = 007 # XMLRPC Size Limit network.xmlrpc.size_limit.set = 16M system.file.max_size.set = 1024G method.set_key = event.download.resumed,foo,\"execute.nothrow=rtcheck,$d.name=,$d.hash=\" method.set_key = event.download.finished,foo2,\"execute.nothrow=rtcheck,$d.name=,$d.hash=\" method.set_key = event.download.finished,filebot,\"execute.nothrow={.filebot/scripts-enabled/rtorrent-postprocess.sh,$d.base_path=,$d.name=,$d.custom1=}\" #debug method.set_key = event.download.finished, finished_try, \"print=finished-triggered!\" pieces.hash.on_completion.set = no dht.mode.set = off pieces.memory.max.set = 4096M protocol.pex.set = no pieces.preload.type.set = 1 pieces.preload.min_size.set = 1 pieces.preload.min_rate.set = 1 #ruTorrent plugins schedule2 = init_plugins, 10, 0, \"execute2 = {sh,-c,/usr/bin/php ~/www/rutorrent/php/initplugins.php &}\" rtorrent.rc Save Location \u00b6 This again, is dependant on your seedbox. Mine was in home/.config/rtorrent/rtorrent.rc","title":"rTorrent.rc"},{"location":"seedbox/rTorrent/rtorrnetrc/#configuration","text":"I will only be covering the most important stuff in this section.. but you can still expand my whole config file below. Name Value Reason network.port_range.set 62000-62000 This is not mandatory. But I wanted to set a static port because I have Uptime Kuma consistently pinging this port to see if rTorrent is up. In the event rTorrent crashes, Uptime Kuma will notify me. network.port_random.set no Same reason as above directory.default.set /home/USERNAME/downloads/rtorrent/seeding This is the folder I want my files to be moved to once completed Note: This is NOT the Hard Link location we will be setting later. So you need to ensure those two locations are different. Also note number of peers - global slots per torrent connection maximums, in progress per torrent connection maximums, seeding per torrent active downloads/uploads I changed the values under those catagories to be huge. You may need to set yours lower. But since my box is ONLY seeding torrents, I wanted to make sure it was doing just that. rtorrent.rc ################################################# ## These settings are mostly user customizable ## ################################################# ## These control where rTorrent looks for .torrents and where files are saved directory.default.set = /home/USERNAME/downloads/rtorrent/seeding schedule2 = watch_directory,5,5,load.start=~/watch/rtorrent/*.torrent #schedule2 = untied_directory,5,5,close_untied= # If there's less than 256MB of disk space, it will stop torrents from # downloading. Keep in mind that we receive alerts about low disk space, so # it shouldn't actually get this low. However, if the server runs out of space, # all of the rTorrents will lock up, eating all of the CPU and spiking loads. schedule2 = low_diskspace,5,60,close_low_diskspace=5120M trackers.use_udp.set = yes # Upload/download rate in KB/s. 0 for unlimited throttle.global_down.max_rate.set_kb = 0 throttle.global_up.max_rate.set_kb = 0 # number of peers - global slots throttle.max_downloads.global.set = 150 throttle.max_uploads.global.set = 5000 # per torrent connection maximums, in progress throttle.min_peers.normal.set = 5000 throttle.max_peers.normal.set = 5000 # per torrent connection maximums, seeding throttle.min_peers.seed.set = 5000 throttle.max_peers.seed.set = 5000 # per torrent active downloads/uploads throttle.max_uploads.set = 5000 throttle.max_downloads.set = 5000 ################################################# ## These settings shouldn't need to be changed ## ################################################# network.scgi.open_local = ~/.config/rtorrent/socket session.path.set = ~/.config/rtorrent/session encoding.add = UTF-8 network.port_range.set = 62000-62000 network.port_random.set = no network.http.dns_cache_timeout.set = 0 ##network.http.ssl_verify_peer.set = 0 ##network.http.ssl_verify_host.set = 0 protocol.encryption.set = allow_incoming,enable_retry,try_outgoing # This chmods the downloaded files to 770. This will allow them to be deleted # by w/ruTorrent, while not allowing any other users to touch them. system.umask.set = 007 # XMLRPC Size Limit network.xmlrpc.size_limit.set = 16M system.file.max_size.set = 1024G method.set_key = event.download.resumed,foo,\"execute.nothrow=rtcheck,$d.name=,$d.hash=\" method.set_key = event.download.finished,foo2,\"execute.nothrow=rtcheck,$d.name=,$d.hash=\" method.set_key = event.download.finished,filebot,\"execute.nothrow={.filebot/scripts-enabled/rtorrent-postprocess.sh,$d.base_path=,$d.name=,$d.custom1=}\" #debug method.set_key = event.download.finished, finished_try, \"print=finished-triggered!\" pieces.hash.on_completion.set = no dht.mode.set = off pieces.memory.max.set = 4096M protocol.pex.set = no pieces.preload.type.set = 1 pieces.preload.min_size.set = 1 pieces.preload.min_rate.set = 1 #ruTorrent plugins schedule2 = init_plugins, 10, 0, \"execute2 = {sh,-c,/usr/bin/php ~/www/rutorrent/php/initplugins.php &}\"","title":"Configuration"},{"location":"seedbox/rTorrent/rtorrnetrc/#rtorrentrc-save-location","text":"This again, is dependant on your seedbox. Mine was in home/.config/rtorrent/rtorrent.rc","title":"rtorrent.rc Save Location"}]}